(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["vendor.aurelia-templating-binding~6483373c"],{

/***/ "aurelia-templating-binding":
/*!***************************************************************************************************!*\
  !*** ./node_modules/aurelia-templating-binding/dist/native-modules/aurelia-templating-binding.js ***!
  \***************************************************************************************************/
/*! exports provided: AttributeMap, InterpolationBindingExpression, InterpolationBinding, ChildInterpolationBinding, LetExpression, LetBinding, LetInterpolationBindingExpression, LetInterpolationBinding, SyntaxInterpreter, TemplatingBindingLanguage, configure */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AttributeMap\", function() { return AttributeMap; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"InterpolationBindingExpression\", function() { return InterpolationBindingExpression; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"InterpolationBinding\", function() { return InterpolationBinding; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ChildInterpolationBinding\", function() { return ChildInterpolationBinding; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LetExpression\", function() { return LetExpression; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LetBinding\", function() { return LetBinding; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LetInterpolationBindingExpression\", function() { return LetInterpolationBindingExpression; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LetInterpolationBinding\", function() { return LetInterpolationBinding; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SyntaxInterpreter\", function() { return SyntaxInterpreter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TemplatingBindingLanguage\", function() { return TemplatingBindingLanguage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"configure\", function() { return configure; });\n/* harmony import */ var aurelia_logging__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aurelia-logging */ \"MP1E\");\n/* harmony import */ var aurelia_binding__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! aurelia-binding */ \"X5gX\");\n/* harmony import */ var aurelia_templating__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! aurelia-templating */ \"hij8\");\nvar _class, _temp, _dec, _class2, _dec2, _class3, _class4, _temp2, _class5, _temp3;\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\nvar AttributeMap = (_temp = _class = function () {\n  function AttributeMap(svg) {\n    \n\n    this.elements = Object.create(null);\n    this.allElements = Object.create(null);\n\n    this.svg = svg;\n\n    this.registerUniversal('accesskey', 'accessKey');\n    this.registerUniversal('contenteditable', 'contentEditable');\n    this.registerUniversal('tabindex', 'tabIndex');\n    this.registerUniversal('textcontent', 'textContent');\n    this.registerUniversal('innerhtml', 'innerHTML');\n    this.registerUniversal('scrolltop', 'scrollTop');\n    this.registerUniversal('scrollleft', 'scrollLeft');\n    this.registerUniversal('readonly', 'readOnly');\n\n    this.register('label', 'for', 'htmlFor');\n\n    this.register('img', 'usemap', 'useMap');\n\n    this.register('input', 'maxlength', 'maxLength');\n    this.register('input', 'minlength', 'minLength');\n    this.register('input', 'formaction', 'formAction');\n    this.register('input', 'formenctype', 'formEncType');\n    this.register('input', 'formmethod', 'formMethod');\n    this.register('input', 'formnovalidate', 'formNoValidate');\n    this.register('input', 'formtarget', 'formTarget');\n\n    this.register('textarea', 'maxlength', 'maxLength');\n\n    this.register('td', 'rowspan', 'rowSpan');\n    this.register('td', 'colspan', 'colSpan');\n    this.register('th', 'rowspan', 'rowSpan');\n    this.register('th', 'colspan', 'colSpan');\n  }\n\n  AttributeMap.prototype.register = function register(elementName, attributeName, propertyName) {\n    elementName = elementName.toLowerCase();\n    attributeName = attributeName.toLowerCase();\n    var element = this.elements[elementName] = this.elements[elementName] || Object.create(null);\n    element[attributeName] = propertyName;\n  };\n\n  AttributeMap.prototype.registerUniversal = function registerUniversal(attributeName, propertyName) {\n    attributeName = attributeName.toLowerCase();\n    this.allElements[attributeName] = propertyName;\n  };\n\n  AttributeMap.prototype.map = function map(elementName, attributeName) {\n    if (this.svg.isStandardSvgAttribute(elementName, attributeName)) {\n      return attributeName;\n    }\n    elementName = elementName.toLowerCase();\n    attributeName = attributeName.toLowerCase();\n    var element = this.elements[elementName];\n    if (element !== undefined && attributeName in element) {\n      return element[attributeName];\n    }\n    if (attributeName in this.allElements) {\n      return this.allElements[attributeName];\n    }\n\n    if (/(?:^data-)|(?:^aria-)|:/.test(attributeName)) {\n      return attributeName;\n    }\n    return Object(aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"camelCase\"])(attributeName);\n  };\n\n  return AttributeMap;\n}(), _class.inject = [aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"SVGAnalyzer\"]], _temp);\n\nvar InterpolationBindingExpression = function () {\n  function InterpolationBindingExpression(observerLocator, targetProperty, parts, mode, lookupFunctions, attribute) {\n    \n\n    this.observerLocator = observerLocator;\n    this.targetProperty = targetProperty;\n    this.parts = parts;\n    this.mode = mode;\n    this.lookupFunctions = lookupFunctions;\n    this.attribute = this.attrToRemove = attribute;\n    this.discrete = false;\n  }\n\n  InterpolationBindingExpression.prototype.createBinding = function createBinding(target) {\n    if (this.parts.length === 3) {\n      return new ChildInterpolationBinding(target, this.observerLocator, this.parts[1], this.mode, this.lookupFunctions, this.targetProperty, this.parts[0], this.parts[2]);\n    }\n    return new InterpolationBinding(this.observerLocator, this.parts, target, this.targetProperty, this.mode, this.lookupFunctions);\n  };\n\n  return InterpolationBindingExpression;\n}();\n\nfunction validateTarget(target, propertyName) {\n  if (propertyName === 'style') {\n    aurelia_logging__WEBPACK_IMPORTED_MODULE_0__[\"getLogger\"]('templating-binding').info('Internet Explorer does not support interpolation in \"style\" attributes.  Use the style attribute\\'s alias, \"css\" instead.');\n  } else if (target.parentElement && target.parentElement.nodeName === 'TEXTAREA' && propertyName === 'textContent') {\n    throw new Error('Interpolation binding cannot be used in the content of a textarea element.  Use <textarea value.bind=\"expression\"></textarea> instead.');\n  }\n}\n\nvar InterpolationBinding = function () {\n  function InterpolationBinding(observerLocator, parts, target, targetProperty, mode, lookupFunctions) {\n    \n\n    validateTarget(target, targetProperty);\n    this.observerLocator = observerLocator;\n    this.parts = parts;\n    this.target = target;\n    this.targetProperty = targetProperty;\n    this.targetAccessor = observerLocator.getAccessor(target, targetProperty);\n    this.mode = mode;\n    this.lookupFunctions = lookupFunctions;\n  }\n\n  InterpolationBinding.prototype.interpolate = function interpolate() {\n    if (this.isBound) {\n      var value = '';\n      var parts = this.parts;\n      for (var i = 0, ii = parts.length; i < ii; i++) {\n        value += i % 2 === 0 ? parts[i] : this['childBinding' + i].value;\n      }\n      this.targetAccessor.setValue(value, this.target, this.targetProperty);\n    }\n  };\n\n  InterpolationBinding.prototype.updateOneTimeBindings = function updateOneTimeBindings() {\n    for (var i = 1, ii = this.parts.length; i < ii; i += 2) {\n      var child = this['childBinding' + i];\n      if (child.mode === aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"bindingMode\"].oneTime) {\n        child.call();\n      }\n    }\n  };\n\n  InterpolationBinding.prototype.bind = function bind(source) {\n    if (this.isBound) {\n      if (this.source === source) {\n        return;\n      }\n      this.unbind();\n    }\n    this.source = source;\n\n    var parts = this.parts;\n    for (var i = 1, ii = parts.length; i < ii; i += 2) {\n      var binding = new ChildInterpolationBinding(this, this.observerLocator, parts[i], this.mode, this.lookupFunctions);\n      binding.bind(source);\n      this['childBinding' + i] = binding;\n    }\n\n    this.isBound = true;\n    this.interpolate();\n  };\n\n  InterpolationBinding.prototype.unbind = function unbind() {\n    if (!this.isBound) {\n      return;\n    }\n    this.isBound = false;\n    this.source = null;\n    var parts = this.parts;\n    for (var i = 1, ii = parts.length; i < ii; i += 2) {\n      var name = 'childBinding' + i;\n      this[name].unbind();\n    }\n  };\n\n  return InterpolationBinding;\n}();\n\nvar ChildInterpolationBinding = (_dec = Object(aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"connectable\"])(), _dec(_class2 = function () {\n  function ChildInterpolationBinding(target, observerLocator, sourceExpression, mode, lookupFunctions, targetProperty, left, right) {\n    \n\n    if (target instanceof InterpolationBinding) {\n      this.parent = target;\n    } else {\n      validateTarget(target, targetProperty);\n      this.target = target;\n      this.targetProperty = targetProperty;\n      this.targetAccessor = observerLocator.getAccessor(target, targetProperty);\n    }\n    this.observerLocator = observerLocator;\n    this.sourceExpression = sourceExpression;\n    this.mode = mode;\n    this.lookupFunctions = lookupFunctions;\n    this.left = left;\n    this.right = right;\n  }\n\n  ChildInterpolationBinding.prototype.updateTarget = function updateTarget(value) {\n    value = value === null || value === undefined ? '' : value.toString();\n    if (value !== this.value) {\n      this.value = value;\n      if (this.parent) {\n        this.parent.interpolate();\n      } else {\n        this.targetAccessor.setValue(this.left + value + this.right, this.target, this.targetProperty);\n      }\n    }\n  };\n\n  ChildInterpolationBinding.prototype.call = function call() {\n    if (!this.isBound) {\n      return;\n    }\n\n    this.rawValue = this.sourceExpression.evaluate(this.source, this.lookupFunctions);\n    this.updateTarget(this.rawValue);\n\n    if (this.mode !== aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"bindingMode\"].oneTime) {\n      this._version++;\n      this.sourceExpression.connect(this, this.source);\n      if (this.rawValue instanceof Array) {\n        this.observeArray(this.rawValue);\n      }\n      this.unobserve(false);\n    }\n  };\n\n  ChildInterpolationBinding.prototype.bind = function bind(source) {\n    if (this.isBound) {\n      if (this.source === source) {\n        return;\n      }\n      this.unbind();\n    }\n    this.isBound = true;\n    this.source = source;\n\n    var sourceExpression = this.sourceExpression;\n    if (sourceExpression.bind) {\n      sourceExpression.bind(this, source, this.lookupFunctions);\n    }\n\n    this.rawValue = sourceExpression.evaluate(source, this.lookupFunctions);\n    this.updateTarget(this.rawValue);\n\n    if (this.mode === aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"bindingMode\"].oneWay) {\n      Object(aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"enqueueBindingConnect\"])(this);\n    }\n  };\n\n  ChildInterpolationBinding.prototype.unbind = function unbind() {\n    if (!this.isBound) {\n      return;\n    }\n    this.isBound = false;\n    var sourceExpression = this.sourceExpression;\n    if (sourceExpression.unbind) {\n      sourceExpression.unbind(this, this.source);\n    }\n    this.source = null;\n    this.value = null;\n    this.rawValue = null;\n    this.unobserve(true);\n  };\n\n  ChildInterpolationBinding.prototype.connect = function connect(evaluate) {\n    if (!this.isBound) {\n      return;\n    }\n    if (evaluate) {\n      this.rawValue = this.sourceExpression.evaluate(this.source, this.lookupFunctions);\n      this.updateTarget(this.rawValue);\n    }\n    this.sourceExpression.connect(this, this.source);\n    if (this.rawValue instanceof Array) {\n      this.observeArray(this.rawValue);\n    }\n  };\n\n  return ChildInterpolationBinding;\n}()) || _class2);\n\nvar LetExpression = function () {\n  function LetExpression(observerLocator, targetProperty, sourceExpression, lookupFunctions, toBindingContext) {\n    \n\n    this.observerLocator = observerLocator;\n    this.sourceExpression = sourceExpression;\n    this.targetProperty = targetProperty;\n    this.lookupFunctions = lookupFunctions;\n    this.toBindingContext = toBindingContext;\n  }\n\n  LetExpression.prototype.createBinding = function createBinding() {\n    return new LetBinding(this.observerLocator, this.sourceExpression, this.targetProperty, this.lookupFunctions, this.toBindingContext);\n  };\n\n  return LetExpression;\n}();\n\nvar LetBinding = (_dec2 = Object(aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"connectable\"])(), _dec2(_class3 = function () {\n  function LetBinding(observerLocator, sourceExpression, targetProperty, lookupFunctions, toBindingContext) {\n    \n\n    this.observerLocator = observerLocator;\n    this.sourceExpression = sourceExpression;\n    this.targetProperty = targetProperty;\n    this.lookupFunctions = lookupFunctions;\n    this.source = null;\n    this.target = null;\n    this.toBindingContext = toBindingContext;\n  }\n\n  LetBinding.prototype.updateTarget = function updateTarget() {\n    var value = this.sourceExpression.evaluate(this.source, this.lookupFunctions);\n    this.target[this.targetProperty] = value;\n  };\n\n  LetBinding.prototype.call = function call(context) {\n    if (!this.isBound) {\n      return;\n    }\n    if (context === aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"sourceContext\"]) {\n      this.updateTarget();\n      return;\n    }\n    throw new Error('Unexpected call context ' + context);\n  };\n\n  LetBinding.prototype.bind = function bind(source) {\n    if (this.isBound) {\n      if (this.source === source) {\n        return;\n      }\n      this.unbind();\n    }\n\n    this.isBound = true;\n    this.source = source;\n    this.target = this.toBindingContext ? source.bindingContext : source.overrideContext;\n\n    if (this.sourceExpression.bind) {\n      this.sourceExpression.bind(this, source, this.lookupFunctions);\n    }\n\n    Object(aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"enqueueBindingConnect\"])(this);\n  };\n\n  LetBinding.prototype.unbind = function unbind() {\n    if (!this.isBound) {\n      return;\n    }\n    this.isBound = false;\n    if (this.sourceExpression.unbind) {\n      this.sourceExpression.unbind(this, this.source);\n    }\n    this.source = null;\n    this.target = null;\n    this.unobserve(true);\n  };\n\n  LetBinding.prototype.connect = function connect() {\n    if (!this.isBound) {\n      return;\n    }\n    this.updateTarget();\n    this.sourceExpression.connect(this, this.source);\n  };\n\n  return LetBinding;\n}()) || _class3);\n\nvar LetInterpolationBindingExpression = function () {\n  function LetInterpolationBindingExpression(observerLocator, targetProperty, parts, lookupFunctions, toBindingContext) {\n    \n\n    this.observerLocator = observerLocator;\n    this.targetProperty = targetProperty;\n    this.parts = parts;\n    this.lookupFunctions = lookupFunctions;\n    this.toBindingContext = toBindingContext;\n  }\n\n  LetInterpolationBindingExpression.prototype.createBinding = function createBinding() {\n    return new LetInterpolationBinding(this.observerLocator, this.targetProperty, this.parts, this.lookupFunctions, this.toBindingContext);\n  };\n\n  return LetInterpolationBindingExpression;\n}();\n\nvar LetInterpolationBinding = function () {\n  function LetInterpolationBinding(observerLocator, targetProperty, parts, lookupFunctions, toBindingContext) {\n    \n\n    this.observerLocator = observerLocator;\n    this.parts = parts;\n    this.targetProperty = targetProperty;\n    this.lookupFunctions = lookupFunctions;\n    this.toBindingContext = toBindingContext;\n    this.target = null;\n  }\n\n  LetInterpolationBinding.prototype.bind = function bind(source) {\n    if (this.isBound) {\n      if (this.source === source) {\n        return;\n      }\n      this.unbind();\n    }\n\n    this.isBound = true;\n    this.source = source;\n    this.target = this.toBindingContext ? source.bindingContext : source.overrideContext;\n\n    this.interpolationBinding = this.createInterpolationBinding();\n    this.interpolationBinding.bind(source);\n  };\n\n  LetInterpolationBinding.prototype.unbind = function unbind() {\n    if (!this.isBound) {\n      return;\n    }\n    this.isBound = false;\n    this.source = null;\n    this.target = null;\n    this.interpolationBinding.unbind();\n    this.interpolationBinding = null;\n  };\n\n  LetInterpolationBinding.prototype.createInterpolationBinding = function createInterpolationBinding() {\n    if (this.parts.length === 3) {\n      return new ChildInterpolationBinding(this.target, this.observerLocator, this.parts[1], aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"bindingMode\"].oneWay, this.lookupFunctions, this.targetProperty, this.parts[0], this.parts[2]);\n    }\n    return new InterpolationBinding(this.observerLocator, this.parts, this.target, this.targetProperty, aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"bindingMode\"].oneWay, this.lookupFunctions);\n  };\n\n  return LetInterpolationBinding;\n}();\n\nvar SyntaxInterpreter = (_temp2 = _class4 = function () {\n  function SyntaxInterpreter(parser, observerLocator, eventManager, attributeMap) {\n    \n\n    this.parser = parser;\n    this.observerLocator = observerLocator;\n    this.eventManager = eventManager;\n    this.attributeMap = attributeMap;\n  }\n\n  SyntaxInterpreter.prototype.interpret = function interpret(resources, element, info, existingInstruction, context) {\n    if (info.command in this) {\n      return this[info.command](resources, element, info, existingInstruction, context);\n    }\n\n    return this.handleUnknownCommand(resources, element, info, existingInstruction, context);\n  };\n\n  SyntaxInterpreter.prototype.handleUnknownCommand = function handleUnknownCommand(resources, element, info, existingInstruction, context) {\n    aurelia_logging__WEBPACK_IMPORTED_MODULE_0__[\"getLogger\"]('templating-binding').warn('Unknown binding command.', info);\n    return existingInstruction;\n  };\n\n  SyntaxInterpreter.prototype.determineDefaultBindingMode = function determineDefaultBindingMode(element, attrName, context) {\n    var tagName = element.tagName.toLowerCase();\n\n    if (tagName === 'input' && (attrName === 'value' || attrName === 'files') && element.type !== 'checkbox' && element.type !== 'radio' || tagName === 'input' && attrName === 'checked' && (element.type === 'checkbox' || element.type === 'radio') || (tagName === 'textarea' || tagName === 'select') && attrName === 'value' || (attrName === 'textcontent' || attrName === 'innerhtml') && element.contentEditable === 'true' || attrName === 'scrolltop' || attrName === 'scrollleft') {\n      return aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"bindingMode\"].twoWay;\n    }\n\n    if (context && attrName in context.attributes && context.attributes[attrName] && context.attributes[attrName].defaultBindingMode >= aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"bindingMode\"].oneTime) {\n      return context.attributes[attrName].defaultBindingMode;\n    }\n\n    return aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"bindingMode\"].oneWay;\n  };\n\n  SyntaxInterpreter.prototype.bind = function bind(resources, element, info, existingInstruction, context) {\n    var instruction = existingInstruction || aurelia_templating__WEBPACK_IMPORTED_MODULE_2__[\"BehaviorInstruction\"].attribute(info.attrName);\n\n    instruction.attributes[info.attrName] = new aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"BindingExpression\"](this.observerLocator, this.attributeMap.map(element.tagName, info.attrName), this.parser.parse(info.attrValue), info.defaultBindingMode === undefined || info.defaultBindingMode === null ? this.determineDefaultBindingMode(element, info.attrName, context) : info.defaultBindingMode, resources.lookupFunctions);\n\n    return instruction;\n  };\n\n  SyntaxInterpreter.prototype.trigger = function trigger(resources, element, info) {\n    return new aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"ListenerExpression\"](this.eventManager, info.attrName, this.parser.parse(info.attrValue), aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"delegationStrategy\"].none, true, resources.lookupFunctions);\n  };\n\n  SyntaxInterpreter.prototype.capture = function capture(resources, element, info) {\n    return new aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"ListenerExpression\"](this.eventManager, info.attrName, this.parser.parse(info.attrValue), aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"delegationStrategy\"].capturing, true, resources.lookupFunctions);\n  };\n\n  SyntaxInterpreter.prototype.delegate = function delegate(resources, element, info) {\n    return new aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"ListenerExpression\"](this.eventManager, info.attrName, this.parser.parse(info.attrValue), aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"delegationStrategy\"].bubbling, true, resources.lookupFunctions);\n  };\n\n  SyntaxInterpreter.prototype.call = function call(resources, element, info, existingInstruction) {\n    var instruction = existingInstruction || aurelia_templating__WEBPACK_IMPORTED_MODULE_2__[\"BehaviorInstruction\"].attribute(info.attrName);\n\n    instruction.attributes[info.attrName] = new aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"CallExpression\"](this.observerLocator, info.attrName, this.parser.parse(info.attrValue), resources.lookupFunctions);\n\n    return instruction;\n  };\n\n  SyntaxInterpreter.prototype.options = function options(resources, element, info, existingInstruction, context) {\n    var instruction = existingInstruction || aurelia_templating__WEBPACK_IMPORTED_MODULE_2__[\"BehaviorInstruction\"].attribute(info.attrName);\n    var attrValue = info.attrValue;\n    var language = this.language;\n    var name = null;\n    var target = '';\n    var current = void 0;\n    var i = void 0;\n    var ii = void 0;\n    var inString = false;\n    var inEscape = false;\n    var foundName = false;\n\n    for (i = 0, ii = attrValue.length; i < ii; ++i) {\n      current = attrValue[i];\n\n      if (current === ';' && !inString) {\n        if (!foundName) {\n          name = this._getPrimaryPropertyName(resources, context);\n        }\n        info = language.inspectAttribute(resources, '?', name, target.trim());\n        language.createAttributeInstruction(resources, element, info, instruction, context);\n\n        if (!instruction.attributes[info.attrName]) {\n          instruction.attributes[info.attrName] = info.attrValue;\n        }\n\n        target = '';\n        name = null;\n      } else if (current === ':' && name === null) {\n        foundName = true;\n        name = target.trim();\n        target = '';\n      } else if (current === '\\\\') {\n        target += current;\n        inEscape = true;\n        continue;\n      } else {\n        target += current;\n\n        if (name !== null && inEscape === false && current === '\\'') {\n          inString = !inString;\n        }\n      }\n\n      inEscape = false;\n    }\n\n    if (!foundName) {\n      name = this._getPrimaryPropertyName(resources, context);\n    }\n\n    if (name !== null) {\n      info = language.inspectAttribute(resources, '?', name, target.trim());\n      language.createAttributeInstruction(resources, element, info, instruction, context);\n\n      if (!instruction.attributes[info.attrName]) {\n        instruction.attributes[info.attrName] = info.attrValue;\n      }\n    }\n\n    return instruction;\n  };\n\n  SyntaxInterpreter.prototype._getPrimaryPropertyName = function _getPrimaryPropertyName(resources, context) {\n    var type = resources.getAttribute(context.attributeName);\n    if (type && type.primaryProperty) {\n      return type.primaryProperty.attribute;\n    }\n    return null;\n  };\n\n  SyntaxInterpreter.prototype['for'] = function _for(resources, element, info, existingInstruction) {\n    var parts = void 0;\n    var keyValue = void 0;\n    var instruction = void 0;\n    var attrValue = void 0;\n    var isDestructuring = void 0;\n\n    attrValue = info.attrValue;\n    isDestructuring = attrValue.match(/^ *[[].+[\\]]/);\n    parts = isDestructuring ? attrValue.split('of ') : attrValue.split(' of ');\n\n    if (parts.length !== 2) {\n      throw new Error('Incorrect syntax for \"for\". The form is: \"$local of $items\" or \"[$key, $value] of $items\".');\n    }\n\n    instruction = existingInstruction || aurelia_templating__WEBPACK_IMPORTED_MODULE_2__[\"BehaviorInstruction\"].attribute(info.attrName);\n\n    if (isDestructuring) {\n      keyValue = parts[0].replace(/[[\\]]/g, '').replace(/,/g, ' ').replace(/\\s+/g, ' ').trim().split(' ');\n      instruction.attributes.key = keyValue[0];\n      instruction.attributes.value = keyValue[1];\n    } else {\n      instruction.attributes.local = parts[0];\n    }\n\n    instruction.attributes.items = new aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"BindingExpression\"](this.observerLocator, 'items', this.parser.parse(parts[1]), aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"bindingMode\"].oneWay, resources.lookupFunctions);\n\n    return instruction;\n  };\n\n  SyntaxInterpreter.prototype['two-way'] = function twoWay(resources, element, info, existingInstruction) {\n    var instruction = existingInstruction || aurelia_templating__WEBPACK_IMPORTED_MODULE_2__[\"BehaviorInstruction\"].attribute(info.attrName);\n\n    instruction.attributes[info.attrName] = new aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"BindingExpression\"](this.observerLocator, this.attributeMap.map(element.tagName, info.attrName), this.parser.parse(info.attrValue), aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"bindingMode\"].twoWay, resources.lookupFunctions);\n\n    return instruction;\n  };\n\n  SyntaxInterpreter.prototype['to-view'] = function toView(resources, element, info, existingInstruction) {\n    var instruction = existingInstruction || aurelia_templating__WEBPACK_IMPORTED_MODULE_2__[\"BehaviorInstruction\"].attribute(info.attrName);\n\n    instruction.attributes[info.attrName] = new aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"BindingExpression\"](this.observerLocator, this.attributeMap.map(element.tagName, info.attrName), this.parser.parse(info.attrValue), aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"bindingMode\"].toView, resources.lookupFunctions);\n\n    return instruction;\n  };\n\n  SyntaxInterpreter.prototype['from-view'] = function fromView(resources, element, info, existingInstruction) {\n    var instruction = existingInstruction || aurelia_templating__WEBPACK_IMPORTED_MODULE_2__[\"BehaviorInstruction\"].attribute(info.attrName);\n\n    instruction.attributes[info.attrName] = new aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"BindingExpression\"](this.observerLocator, this.attributeMap.map(element.tagName, info.attrName), this.parser.parse(info.attrValue), aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"bindingMode\"].fromView, resources.lookupFunctions);\n\n    return instruction;\n  };\n\n  SyntaxInterpreter.prototype['one-time'] = function oneTime(resources, element, info, existingInstruction) {\n    var instruction = existingInstruction || aurelia_templating__WEBPACK_IMPORTED_MODULE_2__[\"BehaviorInstruction\"].attribute(info.attrName);\n\n    instruction.attributes[info.attrName] = new aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"BindingExpression\"](this.observerLocator, this.attributeMap.map(element.tagName, info.attrName), this.parser.parse(info.attrValue), aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"bindingMode\"].oneTime, resources.lookupFunctions);\n\n    return instruction;\n  };\n\n  return SyntaxInterpreter;\n}(), _class4.inject = [aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"Parser\"], aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"ObserverLocator\"], aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"EventManager\"], AttributeMap], _temp2);\n\nSyntaxInterpreter.prototype['one-way'] = SyntaxInterpreter.prototype['to-view'];\n\nvar info = {};\n\nvar TemplatingBindingLanguage = (_temp3 = _class5 = function (_BindingLanguage) {\n  _inherits(TemplatingBindingLanguage, _BindingLanguage);\n\n  function TemplatingBindingLanguage(parser, observerLocator, syntaxInterpreter, attributeMap) {\n    \n\n    var _this = _possibleConstructorReturn(this, _BindingLanguage.call(this));\n\n    _this.parser = parser;\n    _this.observerLocator = observerLocator;\n    _this.syntaxInterpreter = syntaxInterpreter;\n    _this.emptyStringExpression = _this.parser.parse('\\'\\'');\n    syntaxInterpreter.language = _this;\n    _this.attributeMap = attributeMap;\n    _this.toBindingContextAttr = 'to-binding-context';\n    return _this;\n  }\n\n  TemplatingBindingLanguage.prototype.inspectAttribute = function inspectAttribute(resources, elementName, attrName, attrValue) {\n    var parts = attrName.split('.');\n\n    info.defaultBindingMode = null;\n\n    if (parts.length === 2) {\n      info.attrName = parts[0].trim();\n      info.attrValue = attrValue;\n      info.command = parts[1].trim();\n\n      if (info.command === 'ref') {\n        info.expression = new aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"NameExpression\"](this.parser.parse(attrValue), info.attrName, resources.lookupFunctions);\n        info.command = null;\n        info.attrName = 'ref';\n      } else {\n        info.expression = null;\n      }\n    } else if (attrName === 'ref') {\n      info.attrName = attrName;\n      info.attrValue = attrValue;\n      info.command = null;\n      info.expression = new aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"NameExpression\"](this.parser.parse(attrValue), 'element', resources.lookupFunctions);\n    } else {\n      info.attrName = attrName;\n      info.attrValue = attrValue;\n      info.command = null;\n      var interpolationParts = this.parseInterpolation(resources, attrValue);\n      if (interpolationParts === null) {\n        info.expression = null;\n      } else {\n        info.expression = new InterpolationBindingExpression(this.observerLocator, this.attributeMap.map(elementName, attrName), interpolationParts, aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"bindingMode\"].oneWay, resources.lookupFunctions, attrName);\n      }\n    }\n\n    return info;\n  };\n\n  TemplatingBindingLanguage.prototype.createAttributeInstruction = function createAttributeInstruction(resources, element, theInfo, existingInstruction, context) {\n    var instruction = void 0;\n\n    if (theInfo.expression) {\n      if (theInfo.attrName === 'ref') {\n        return theInfo.expression;\n      }\n\n      instruction = existingInstruction || aurelia_templating__WEBPACK_IMPORTED_MODULE_2__[\"BehaviorInstruction\"].attribute(theInfo.attrName);\n      instruction.attributes[theInfo.attrName] = theInfo.expression;\n    } else if (theInfo.command) {\n      instruction = this.syntaxInterpreter.interpret(resources, element, theInfo, existingInstruction, context);\n    }\n\n    return instruction;\n  };\n\n  TemplatingBindingLanguage.prototype.createLetExpressions = function createLetExpressions(resources, letElement) {\n    var expressions = [];\n    var attributes = letElement.attributes;\n\n    var attr = void 0;\n\n    var parts = void 0;\n    var attrName = void 0;\n    var attrValue = void 0;\n    var command = void 0;\n    var toBindingContextAttr = this.toBindingContextAttr;\n    var toBindingContext = letElement.hasAttribute(toBindingContextAttr);\n    for (var i = 0, ii = attributes.length; ii > i; ++i) {\n      attr = attributes[i];\n      attrName = attr.name;\n      attrValue = attr.nodeValue;\n      parts = attrName.split('.');\n\n      if (attrName === toBindingContextAttr) {\n        continue;\n      }\n\n      if (parts.length === 2) {\n        command = parts[1];\n        if (command !== 'bind') {\n          aurelia_logging__WEBPACK_IMPORTED_MODULE_0__[\"getLogger\"]('templating-binding-language').warn('Detected invalid let command. Expected \"' + parts[0] + '.bind\", given \"' + attrName + '\"');\n          continue;\n        }\n        expressions.push(new LetExpression(this.observerLocator, Object(aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"camelCase\"])(parts[0]), this.parser.parse(attrValue), resources.lookupFunctions, toBindingContext));\n      } else {\n        attrName = Object(aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"camelCase\"])(attrName);\n        parts = this.parseInterpolation(resources, attrValue);\n        if (parts === null) {\n          aurelia_logging__WEBPACK_IMPORTED_MODULE_0__[\"getLogger\"]('templating-binding-language').warn('Detected string literal in let bindings. Did you mean \"' + attrName + '.bind=' + attrValue + '\" or \"' + attrName + '=${' + attrValue + '}\" ?');\n        }\n        if (parts) {\n          expressions.push(new LetInterpolationBindingExpression(this.observerLocator, attrName, parts, resources.lookupFunctions, toBindingContext));\n        } else {\n          expressions.push(new LetExpression(this.observerLocator, attrName, new aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"LiteralString\"](attrValue), resources.lookupFunctions, toBindingContext));\n        }\n      }\n    }\n    return expressions;\n  };\n\n  TemplatingBindingLanguage.prototype.inspectTextContent = function inspectTextContent(resources, value) {\n    var parts = this.parseInterpolation(resources, value);\n    if (parts === null) {\n      return null;\n    }\n    return new InterpolationBindingExpression(this.observerLocator, 'textContent', parts, aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"bindingMode\"].oneWay, resources.lookupFunctions, 'textContent');\n  };\n\n  TemplatingBindingLanguage.prototype.parseInterpolation = function parseInterpolation(resources, value) {\n    var i = value.indexOf('${', 0);\n    var ii = value.length;\n    var char = void 0;\n    var pos = 0;\n    var open = 0;\n    var quote = null;\n    var interpolationStart = void 0;\n    var parts = void 0;\n    var partIndex = 0;\n\n    while (i >= 0 && i < ii - 2) {\n      open = 1;\n      interpolationStart = i;\n      i += 2;\n\n      do {\n        char = value[i];\n        i++;\n\n        if (char === \"'\" || char === '\"') {\n          if (quote === null) {\n            quote = char;\n          } else if (quote === char) {\n            quote = null;\n          }\n          continue;\n        }\n\n        if (char === '\\\\') {\n          i++;\n          continue;\n        }\n\n        if (quote !== null) {\n          continue;\n        }\n\n        if (char === '{') {\n          open++;\n        } else if (char === '}') {\n          open--;\n        }\n      } while (open > 0 && i < ii);\n\n      if (open === 0) {\n        parts = parts || [];\n        if (value[interpolationStart - 1] === '\\\\' && value[interpolationStart - 2] !== '\\\\') {\n          parts[partIndex] = value.substring(pos, interpolationStart - 1) + value.substring(interpolationStart, i);\n          partIndex++;\n          parts[partIndex] = this.emptyStringExpression;\n          partIndex++;\n        } else {\n          parts[partIndex] = value.substring(pos, interpolationStart);\n          partIndex++;\n          parts[partIndex] = this.parser.parse(value.substring(interpolationStart + 2, i - 1));\n          partIndex++;\n        }\n        pos = i;\n        i = value.indexOf('${', i);\n      } else {\n        break;\n      }\n    }\n\n    if (partIndex === 0) {\n      return null;\n    }\n\n    parts[partIndex] = value.substr(pos);\n    return parts;\n  };\n\n  return TemplatingBindingLanguage;\n}(aurelia_templating__WEBPACK_IMPORTED_MODULE_2__[\"BindingLanguage\"]), _class5.inject = [aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"Parser\"], aurelia_binding__WEBPACK_IMPORTED_MODULE_1__[\"ObserverLocator\"], SyntaxInterpreter, AttributeMap], _temp3);\n\nfunction configure(config) {\n  config.container.registerSingleton(aurelia_templating__WEBPACK_IMPORTED_MODULE_2__[\"BindingLanguage\"], TemplatingBindingLanguage);\n  config.container.registerAlias(aurelia_templating__WEBPACK_IMPORTED_MODULE_2__[\"BindingLanguage\"], TemplatingBindingLanguage);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXVyZWxpYS10ZW1wbGF0aW5nLWJpbmRpbmcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXVyZWxpYS10ZW1wbGF0aW5nLWJpbmRpbmcvZGlzdC9uYXRpdmUtbW9kdWxlcy9hdXJlbGlhLXRlbXBsYXRpbmctYmluZGluZy5qcz81NzBkIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfY2xhc3MsIF90ZW1wLCBfZGVjLCBfY2xhc3MyLCBfZGVjMiwgX2NsYXNzMywgX2NsYXNzNCwgX3RlbXAyLCBfY2xhc3M1LCBfdGVtcDM7XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuXG5cbmltcG9ydCAqIGFzIExvZ01hbmFnZXIgZnJvbSAnYXVyZWxpYS1sb2dnaW5nJztcbmltcG9ydCB7IGNhbWVsQ2FzZSwgU1ZHQW5hbHl6ZXIsIGJpbmRpbmdNb2RlLCBjb25uZWN0YWJsZSwgZW5xdWV1ZUJpbmRpbmdDb25uZWN0LCBzb3VyY2VDb250ZXh0LCBQYXJzZXIsIE9ic2VydmVyTG9jYXRvciwgRXZlbnRNYW5hZ2VyLCBMaXN0ZW5lckV4cHJlc3Npb24sIEJpbmRpbmdFeHByZXNzaW9uLCBDYWxsRXhwcmVzc2lvbiwgZGVsZWdhdGlvblN0cmF0ZWd5LCBOYW1lRXhwcmVzc2lvbiwgTGl0ZXJhbFN0cmluZyB9IGZyb20gJ2F1cmVsaWEtYmluZGluZyc7XG5pbXBvcnQgeyBCZWhhdmlvckluc3RydWN0aW9uLCBCaW5kaW5nTGFuZ3VhZ2UgfSBmcm9tICdhdXJlbGlhLXRlbXBsYXRpbmcnO1xuXG5leHBvcnQgdmFyIEF0dHJpYnV0ZU1hcCA9IChfdGVtcCA9IF9jbGFzcyA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gQXR0cmlidXRlTWFwKHN2Zykge1xuICAgIFxuXG4gICAgdGhpcy5lbGVtZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5hbGxFbGVtZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICB0aGlzLnN2ZyA9IHN2ZztcblxuICAgIHRoaXMucmVnaXN0ZXJVbml2ZXJzYWwoJ2FjY2Vzc2tleScsICdhY2Nlc3NLZXknKTtcbiAgICB0aGlzLnJlZ2lzdGVyVW5pdmVyc2FsKCdjb250ZW50ZWRpdGFibGUnLCAnY29udGVudEVkaXRhYmxlJyk7XG4gICAgdGhpcy5yZWdpc3RlclVuaXZlcnNhbCgndGFiaW5kZXgnLCAndGFiSW5kZXgnKTtcbiAgICB0aGlzLnJlZ2lzdGVyVW5pdmVyc2FsKCd0ZXh0Y29udGVudCcsICd0ZXh0Q29udGVudCcpO1xuICAgIHRoaXMucmVnaXN0ZXJVbml2ZXJzYWwoJ2lubmVyaHRtbCcsICdpbm5lckhUTUwnKTtcbiAgICB0aGlzLnJlZ2lzdGVyVW5pdmVyc2FsKCdzY3JvbGx0b3AnLCAnc2Nyb2xsVG9wJyk7XG4gICAgdGhpcy5yZWdpc3RlclVuaXZlcnNhbCgnc2Nyb2xsbGVmdCcsICdzY3JvbGxMZWZ0Jyk7XG4gICAgdGhpcy5yZWdpc3RlclVuaXZlcnNhbCgncmVhZG9ubHknLCAncmVhZE9ubHknKTtcblxuICAgIHRoaXMucmVnaXN0ZXIoJ2xhYmVsJywgJ2ZvcicsICdodG1sRm9yJyk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyKCdpbWcnLCAndXNlbWFwJywgJ3VzZU1hcCcpO1xuXG4gICAgdGhpcy5yZWdpc3RlcignaW5wdXQnLCAnbWF4bGVuZ3RoJywgJ21heExlbmd0aCcpO1xuICAgIHRoaXMucmVnaXN0ZXIoJ2lucHV0JywgJ21pbmxlbmd0aCcsICdtaW5MZW5ndGgnKTtcbiAgICB0aGlzLnJlZ2lzdGVyKCdpbnB1dCcsICdmb3JtYWN0aW9uJywgJ2Zvcm1BY3Rpb24nKTtcbiAgICB0aGlzLnJlZ2lzdGVyKCdpbnB1dCcsICdmb3JtZW5jdHlwZScsICdmb3JtRW5jVHlwZScpO1xuICAgIHRoaXMucmVnaXN0ZXIoJ2lucHV0JywgJ2Zvcm1tZXRob2QnLCAnZm9ybU1ldGhvZCcpO1xuICAgIHRoaXMucmVnaXN0ZXIoJ2lucHV0JywgJ2Zvcm1ub3ZhbGlkYXRlJywgJ2Zvcm1Ob1ZhbGlkYXRlJyk7XG4gICAgdGhpcy5yZWdpc3RlcignaW5wdXQnLCAnZm9ybXRhcmdldCcsICdmb3JtVGFyZ2V0Jyk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyKCd0ZXh0YXJlYScsICdtYXhsZW5ndGgnLCAnbWF4TGVuZ3RoJyk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyKCd0ZCcsICdyb3dzcGFuJywgJ3Jvd1NwYW4nKTtcbiAgICB0aGlzLnJlZ2lzdGVyKCd0ZCcsICdjb2xzcGFuJywgJ2NvbFNwYW4nKTtcbiAgICB0aGlzLnJlZ2lzdGVyKCd0aCcsICdyb3dzcGFuJywgJ3Jvd1NwYW4nKTtcbiAgICB0aGlzLnJlZ2lzdGVyKCd0aCcsICdjb2xzcGFuJywgJ2NvbFNwYW4nKTtcbiAgfVxuXG4gIEF0dHJpYnV0ZU1hcC5wcm90b3R5cGUucmVnaXN0ZXIgPSBmdW5jdGlvbiByZWdpc3RlcihlbGVtZW50TmFtZSwgYXR0cmlidXRlTmFtZSwgcHJvcGVydHlOYW1lKSB7XG4gICAgZWxlbWVudE5hbWUgPSBlbGVtZW50TmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIGF0dHJpYnV0ZU5hbWUgPSBhdHRyaWJ1dGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgdmFyIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnRzW2VsZW1lbnROYW1lXSA9IHRoaXMuZWxlbWVudHNbZWxlbWVudE5hbWVdIHx8IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgZWxlbWVudFthdHRyaWJ1dGVOYW1lXSA9IHByb3BlcnR5TmFtZTtcbiAgfTtcblxuICBBdHRyaWJ1dGVNYXAucHJvdG90eXBlLnJlZ2lzdGVyVW5pdmVyc2FsID0gZnVuY3Rpb24gcmVnaXN0ZXJVbml2ZXJzYWwoYXR0cmlidXRlTmFtZSwgcHJvcGVydHlOYW1lKSB7XG4gICAgYXR0cmlidXRlTmFtZSA9IGF0dHJpYnV0ZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICB0aGlzLmFsbEVsZW1lbnRzW2F0dHJpYnV0ZU5hbWVdID0gcHJvcGVydHlOYW1lO1xuICB9O1xuXG4gIEF0dHJpYnV0ZU1hcC5wcm90b3R5cGUubWFwID0gZnVuY3Rpb24gbWFwKGVsZW1lbnROYW1lLCBhdHRyaWJ1dGVOYW1lKSB7XG4gICAgaWYgKHRoaXMuc3ZnLmlzU3RhbmRhcmRTdmdBdHRyaWJ1dGUoZWxlbWVudE5hbWUsIGF0dHJpYnV0ZU5hbWUpKSB7XG4gICAgICByZXR1cm4gYXR0cmlidXRlTmFtZTtcbiAgICB9XG4gICAgZWxlbWVudE5hbWUgPSBlbGVtZW50TmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIGF0dHJpYnV0ZU5hbWUgPSBhdHRyaWJ1dGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgdmFyIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnRzW2VsZW1lbnROYW1lXTtcbiAgICBpZiAoZWxlbWVudCAhPT0gdW5kZWZpbmVkICYmIGF0dHJpYnV0ZU5hbWUgaW4gZWxlbWVudCkge1xuICAgICAgcmV0dXJuIGVsZW1lbnRbYXR0cmlidXRlTmFtZV07XG4gICAgfVxuICAgIGlmIChhdHRyaWJ1dGVOYW1lIGluIHRoaXMuYWxsRWxlbWVudHMpIHtcbiAgICAgIHJldHVybiB0aGlzLmFsbEVsZW1lbnRzW2F0dHJpYnV0ZU5hbWVdO1xuICAgIH1cblxuICAgIGlmICgvKD86XmRhdGEtKXwoPzpeYXJpYS0pfDovLnRlc3QoYXR0cmlidXRlTmFtZSkpIHtcbiAgICAgIHJldHVybiBhdHRyaWJ1dGVOYW1lO1xuICAgIH1cbiAgICByZXR1cm4gY2FtZWxDYXNlKGF0dHJpYnV0ZU5hbWUpO1xuICB9O1xuXG4gIHJldHVybiBBdHRyaWJ1dGVNYXA7XG59KCksIF9jbGFzcy5pbmplY3QgPSBbU1ZHQW5hbHl6ZXJdLCBfdGVtcCk7XG5cbmV4cG9ydCB2YXIgSW50ZXJwb2xhdGlvbkJpbmRpbmdFeHByZXNzaW9uID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBJbnRlcnBvbGF0aW9uQmluZGluZ0V4cHJlc3Npb24ob2JzZXJ2ZXJMb2NhdG9yLCB0YXJnZXRQcm9wZXJ0eSwgcGFydHMsIG1vZGUsIGxvb2t1cEZ1bmN0aW9ucywgYXR0cmlidXRlKSB7XG4gICAgXG5cbiAgICB0aGlzLm9ic2VydmVyTG9jYXRvciA9IG9ic2VydmVyTG9jYXRvcjtcbiAgICB0aGlzLnRhcmdldFByb3BlcnR5ID0gdGFyZ2V0UHJvcGVydHk7XG4gICAgdGhpcy5wYXJ0cyA9IHBhcnRzO1xuICAgIHRoaXMubW9kZSA9IG1vZGU7XG4gICAgdGhpcy5sb29rdXBGdW5jdGlvbnMgPSBsb29rdXBGdW5jdGlvbnM7XG4gICAgdGhpcy5hdHRyaWJ1dGUgPSB0aGlzLmF0dHJUb1JlbW92ZSA9IGF0dHJpYnV0ZTtcbiAgICB0aGlzLmRpc2NyZXRlID0gZmFsc2U7XG4gIH1cblxuICBJbnRlcnBvbGF0aW9uQmluZGluZ0V4cHJlc3Npb24ucHJvdG90eXBlLmNyZWF0ZUJpbmRpbmcgPSBmdW5jdGlvbiBjcmVhdGVCaW5kaW5nKHRhcmdldCkge1xuICAgIGlmICh0aGlzLnBhcnRzLmxlbmd0aCA9PT0gMykge1xuICAgICAgcmV0dXJuIG5ldyBDaGlsZEludGVycG9sYXRpb25CaW5kaW5nKHRhcmdldCwgdGhpcy5vYnNlcnZlckxvY2F0b3IsIHRoaXMucGFydHNbMV0sIHRoaXMubW9kZSwgdGhpcy5sb29rdXBGdW5jdGlvbnMsIHRoaXMudGFyZ2V0UHJvcGVydHksIHRoaXMucGFydHNbMF0sIHRoaXMucGFydHNbMl0pO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEludGVycG9sYXRpb25CaW5kaW5nKHRoaXMub2JzZXJ2ZXJMb2NhdG9yLCB0aGlzLnBhcnRzLCB0YXJnZXQsIHRoaXMudGFyZ2V0UHJvcGVydHksIHRoaXMubW9kZSwgdGhpcy5sb29rdXBGdW5jdGlvbnMpO1xuICB9O1xuXG4gIHJldHVybiBJbnRlcnBvbGF0aW9uQmluZGluZ0V4cHJlc3Npb247XG59KCk7XG5cbmZ1bmN0aW9uIHZhbGlkYXRlVGFyZ2V0KHRhcmdldCwgcHJvcGVydHlOYW1lKSB7XG4gIGlmIChwcm9wZXJ0eU5hbWUgPT09ICdzdHlsZScpIHtcbiAgICBMb2dNYW5hZ2VyLmdldExvZ2dlcigndGVtcGxhdGluZy1iaW5kaW5nJykuaW5mbygnSW50ZXJuZXQgRXhwbG9yZXIgZG9lcyBub3Qgc3VwcG9ydCBpbnRlcnBvbGF0aW9uIGluIFwic3R5bGVcIiBhdHRyaWJ1dGVzLiAgVXNlIHRoZSBzdHlsZSBhdHRyaWJ1dGVcXCdzIGFsaWFzLCBcImNzc1wiIGluc3RlYWQuJyk7XG4gIH0gZWxzZSBpZiAodGFyZ2V0LnBhcmVudEVsZW1lbnQgJiYgdGFyZ2V0LnBhcmVudEVsZW1lbnQubm9kZU5hbWUgPT09ICdURVhUQVJFQScgJiYgcHJvcGVydHlOYW1lID09PSAndGV4dENvbnRlbnQnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnRlcnBvbGF0aW9uIGJpbmRpbmcgY2Fubm90IGJlIHVzZWQgaW4gdGhlIGNvbnRlbnQgb2YgYSB0ZXh0YXJlYSBlbGVtZW50LiAgVXNlIDx0ZXh0YXJlYSB2YWx1ZS5iaW5kPVwiZXhwcmVzc2lvblwiPjwvdGV4dGFyZWE+IGluc3RlYWQuJyk7XG4gIH1cbn1cblxuZXhwb3J0IHZhciBJbnRlcnBvbGF0aW9uQmluZGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gSW50ZXJwb2xhdGlvbkJpbmRpbmcob2JzZXJ2ZXJMb2NhdG9yLCBwYXJ0cywgdGFyZ2V0LCB0YXJnZXRQcm9wZXJ0eSwgbW9kZSwgbG9va3VwRnVuY3Rpb25zKSB7XG4gICAgXG5cbiAgICB2YWxpZGF0ZVRhcmdldCh0YXJnZXQsIHRhcmdldFByb3BlcnR5KTtcbiAgICB0aGlzLm9ic2VydmVyTG9jYXRvciA9IG9ic2VydmVyTG9jYXRvcjtcbiAgICB0aGlzLnBhcnRzID0gcGFydHM7XG4gICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgdGhpcy50YXJnZXRQcm9wZXJ0eSA9IHRhcmdldFByb3BlcnR5O1xuICAgIHRoaXMudGFyZ2V0QWNjZXNzb3IgPSBvYnNlcnZlckxvY2F0b3IuZ2V0QWNjZXNzb3IodGFyZ2V0LCB0YXJnZXRQcm9wZXJ0eSk7XG4gICAgdGhpcy5tb2RlID0gbW9kZTtcbiAgICB0aGlzLmxvb2t1cEZ1bmN0aW9ucyA9IGxvb2t1cEZ1bmN0aW9ucztcbiAgfVxuXG4gIEludGVycG9sYXRpb25CaW5kaW5nLnByb3RvdHlwZS5pbnRlcnBvbGF0ZSA9IGZ1bmN0aW9uIGludGVycG9sYXRlKCkge1xuICAgIGlmICh0aGlzLmlzQm91bmQpIHtcbiAgICAgIHZhciB2YWx1ZSA9ICcnO1xuICAgICAgdmFyIHBhcnRzID0gdGhpcy5wYXJ0cztcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHBhcnRzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgdmFsdWUgKz0gaSAlIDIgPT09IDAgPyBwYXJ0c1tpXSA6IHRoaXNbJ2NoaWxkQmluZGluZycgKyBpXS52YWx1ZTtcbiAgICAgIH1cbiAgICAgIHRoaXMudGFyZ2V0QWNjZXNzb3Iuc2V0VmFsdWUodmFsdWUsIHRoaXMudGFyZ2V0LCB0aGlzLnRhcmdldFByb3BlcnR5KTtcbiAgICB9XG4gIH07XG5cbiAgSW50ZXJwb2xhdGlvbkJpbmRpbmcucHJvdG90eXBlLnVwZGF0ZU9uZVRpbWVCaW5kaW5ncyA9IGZ1bmN0aW9uIHVwZGF0ZU9uZVRpbWVCaW5kaW5ncygpIHtcbiAgICBmb3IgKHZhciBpID0gMSwgaWkgPSB0aGlzLnBhcnRzLmxlbmd0aDsgaSA8IGlpOyBpICs9IDIpIHtcbiAgICAgIHZhciBjaGlsZCA9IHRoaXNbJ2NoaWxkQmluZGluZycgKyBpXTtcbiAgICAgIGlmIChjaGlsZC5tb2RlID09PSBiaW5kaW5nTW9kZS5vbmVUaW1lKSB7XG4gICAgICAgIGNoaWxkLmNhbGwoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgSW50ZXJwb2xhdGlvbkJpbmRpbmcucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiBiaW5kKHNvdXJjZSkge1xuICAgIGlmICh0aGlzLmlzQm91bmQpIHtcbiAgICAgIGlmICh0aGlzLnNvdXJjZSA9PT0gc291cmNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMudW5iaW5kKCk7XG4gICAgfVxuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuXG4gICAgdmFyIHBhcnRzID0gdGhpcy5wYXJ0cztcbiAgICBmb3IgKHZhciBpID0gMSwgaWkgPSBwYXJ0cy5sZW5ndGg7IGkgPCBpaTsgaSArPSAyKSB7XG4gICAgICB2YXIgYmluZGluZyA9IG5ldyBDaGlsZEludGVycG9sYXRpb25CaW5kaW5nKHRoaXMsIHRoaXMub2JzZXJ2ZXJMb2NhdG9yLCBwYXJ0c1tpXSwgdGhpcy5tb2RlLCB0aGlzLmxvb2t1cEZ1bmN0aW9ucyk7XG4gICAgICBiaW5kaW5nLmJpbmQoc291cmNlKTtcbiAgICAgIHRoaXNbJ2NoaWxkQmluZGluZycgKyBpXSA9IGJpbmRpbmc7XG4gICAgfVxuXG4gICAgdGhpcy5pc0JvdW5kID0gdHJ1ZTtcbiAgICB0aGlzLmludGVycG9sYXRlKCk7XG4gIH07XG5cbiAgSW50ZXJwb2xhdGlvbkJpbmRpbmcucHJvdG90eXBlLnVuYmluZCA9IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICBpZiAoIXRoaXMuaXNCb3VuZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmlzQm91bmQgPSBmYWxzZTtcbiAgICB0aGlzLnNvdXJjZSA9IG51bGw7XG4gICAgdmFyIHBhcnRzID0gdGhpcy5wYXJ0cztcbiAgICBmb3IgKHZhciBpID0gMSwgaWkgPSBwYXJ0cy5sZW5ndGg7IGkgPCBpaTsgaSArPSAyKSB7XG4gICAgICB2YXIgbmFtZSA9ICdjaGlsZEJpbmRpbmcnICsgaTtcbiAgICAgIHRoaXNbbmFtZV0udW5iaW5kKCk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBJbnRlcnBvbGF0aW9uQmluZGluZztcbn0oKTtcblxuZXhwb3J0IHZhciBDaGlsZEludGVycG9sYXRpb25CaW5kaW5nID0gKF9kZWMgPSBjb25uZWN0YWJsZSgpLCBfZGVjKF9jbGFzczIgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIENoaWxkSW50ZXJwb2xhdGlvbkJpbmRpbmcodGFyZ2V0LCBvYnNlcnZlckxvY2F0b3IsIHNvdXJjZUV4cHJlc3Npb24sIG1vZGUsIGxvb2t1cEZ1bmN0aW9ucywgdGFyZ2V0UHJvcGVydHksIGxlZnQsIHJpZ2h0KSB7XG4gICAgXG5cbiAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgSW50ZXJwb2xhdGlvbkJpbmRpbmcpIHtcbiAgICAgIHRoaXMucGFyZW50ID0gdGFyZ2V0O1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWxpZGF0ZVRhcmdldCh0YXJnZXQsIHRhcmdldFByb3BlcnR5KTtcbiAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgdGhpcy50YXJnZXRQcm9wZXJ0eSA9IHRhcmdldFByb3BlcnR5O1xuICAgICAgdGhpcy50YXJnZXRBY2Nlc3NvciA9IG9ic2VydmVyTG9jYXRvci5nZXRBY2Nlc3Nvcih0YXJnZXQsIHRhcmdldFByb3BlcnR5KTtcbiAgICB9XG4gICAgdGhpcy5vYnNlcnZlckxvY2F0b3IgPSBvYnNlcnZlckxvY2F0b3I7XG4gICAgdGhpcy5zb3VyY2VFeHByZXNzaW9uID0gc291cmNlRXhwcmVzc2lvbjtcbiAgICB0aGlzLm1vZGUgPSBtb2RlO1xuICAgIHRoaXMubG9va3VwRnVuY3Rpb25zID0gbG9va3VwRnVuY3Rpb25zO1xuICAgIHRoaXMubGVmdCA9IGxlZnQ7XG4gICAgdGhpcy5yaWdodCA9IHJpZ2h0O1xuICB9XG5cbiAgQ2hpbGRJbnRlcnBvbGF0aW9uQmluZGluZy5wcm90b3R5cGUudXBkYXRlVGFyZ2V0ID0gZnVuY3Rpb24gdXBkYXRlVGFyZ2V0KHZhbHVlKSB7XG4gICAgdmFsdWUgPSB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gJycgOiB2YWx1ZS50b1N0cmluZygpO1xuICAgIGlmICh2YWx1ZSAhPT0gdGhpcy52YWx1ZSkge1xuICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgaWYgKHRoaXMucGFyZW50KSB7XG4gICAgICAgIHRoaXMucGFyZW50LmludGVycG9sYXRlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnRhcmdldEFjY2Vzc29yLnNldFZhbHVlKHRoaXMubGVmdCArIHZhbHVlICsgdGhpcy5yaWdodCwgdGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0UHJvcGVydHkpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBDaGlsZEludGVycG9sYXRpb25CaW5kaW5nLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gY2FsbCgpIHtcbiAgICBpZiAoIXRoaXMuaXNCb3VuZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMucmF3VmFsdWUgPSB0aGlzLnNvdXJjZUV4cHJlc3Npb24uZXZhbHVhdGUodGhpcy5zb3VyY2UsIHRoaXMubG9va3VwRnVuY3Rpb25zKTtcbiAgICB0aGlzLnVwZGF0ZVRhcmdldCh0aGlzLnJhd1ZhbHVlKTtcblxuICAgIGlmICh0aGlzLm1vZGUgIT09IGJpbmRpbmdNb2RlLm9uZVRpbWUpIHtcbiAgICAgIHRoaXMuX3ZlcnNpb24rKztcbiAgICAgIHRoaXMuc291cmNlRXhwcmVzc2lvbi5jb25uZWN0KHRoaXMsIHRoaXMuc291cmNlKTtcbiAgICAgIGlmICh0aGlzLnJhd1ZhbHVlIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlQXJyYXkodGhpcy5yYXdWYWx1ZSk7XG4gICAgICB9XG4gICAgICB0aGlzLnVub2JzZXJ2ZShmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIENoaWxkSW50ZXJwb2xhdGlvbkJpbmRpbmcucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiBiaW5kKHNvdXJjZSkge1xuICAgIGlmICh0aGlzLmlzQm91bmQpIHtcbiAgICAgIGlmICh0aGlzLnNvdXJjZSA9PT0gc291cmNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMudW5iaW5kKCk7XG4gICAgfVxuICAgIHRoaXMuaXNCb3VuZCA9IHRydWU7XG4gICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cbiAgICB2YXIgc291cmNlRXhwcmVzc2lvbiA9IHRoaXMuc291cmNlRXhwcmVzc2lvbjtcbiAgICBpZiAoc291cmNlRXhwcmVzc2lvbi5iaW5kKSB7XG4gICAgICBzb3VyY2VFeHByZXNzaW9uLmJpbmQodGhpcywgc291cmNlLCB0aGlzLmxvb2t1cEZ1bmN0aW9ucyk7XG4gICAgfVxuXG4gICAgdGhpcy5yYXdWYWx1ZSA9IHNvdXJjZUV4cHJlc3Npb24uZXZhbHVhdGUoc291cmNlLCB0aGlzLmxvb2t1cEZ1bmN0aW9ucyk7XG4gICAgdGhpcy51cGRhdGVUYXJnZXQodGhpcy5yYXdWYWx1ZSk7XG5cbiAgICBpZiAodGhpcy5tb2RlID09PSBiaW5kaW5nTW9kZS5vbmVXYXkpIHtcbiAgICAgIGVucXVldWVCaW5kaW5nQ29ubmVjdCh0aGlzKTtcbiAgICB9XG4gIH07XG5cbiAgQ2hpbGRJbnRlcnBvbGF0aW9uQmluZGluZy5wcm90b3R5cGUudW5iaW5kID0gZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIGlmICghdGhpcy5pc0JvdW5kKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgIHZhciBzb3VyY2VFeHByZXNzaW9uID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uO1xuICAgIGlmIChzb3VyY2VFeHByZXNzaW9uLnVuYmluZCkge1xuICAgICAgc291cmNlRXhwcmVzc2lvbi51bmJpbmQodGhpcywgdGhpcy5zb3VyY2UpO1xuICAgIH1cbiAgICB0aGlzLnNvdXJjZSA9IG51bGw7XG4gICAgdGhpcy52YWx1ZSA9IG51bGw7XG4gICAgdGhpcy5yYXdWYWx1ZSA9IG51bGw7XG4gICAgdGhpcy51bm9ic2VydmUodHJ1ZSk7XG4gIH07XG5cbiAgQ2hpbGRJbnRlcnBvbGF0aW9uQmluZGluZy5wcm90b3R5cGUuY29ubmVjdCA9IGZ1bmN0aW9uIGNvbm5lY3QoZXZhbHVhdGUpIHtcbiAgICBpZiAoIXRoaXMuaXNCb3VuZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoZXZhbHVhdGUpIHtcbiAgICAgIHRoaXMucmF3VmFsdWUgPSB0aGlzLnNvdXJjZUV4cHJlc3Npb24uZXZhbHVhdGUodGhpcy5zb3VyY2UsIHRoaXMubG9va3VwRnVuY3Rpb25zKTtcbiAgICAgIHRoaXMudXBkYXRlVGFyZ2V0KHRoaXMucmF3VmFsdWUpO1xuICAgIH1cbiAgICB0aGlzLnNvdXJjZUV4cHJlc3Npb24uY29ubmVjdCh0aGlzLCB0aGlzLnNvdXJjZSk7XG4gICAgaWYgKHRoaXMucmF3VmFsdWUgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgdGhpcy5vYnNlcnZlQXJyYXkodGhpcy5yYXdWYWx1ZSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBDaGlsZEludGVycG9sYXRpb25CaW5kaW5nO1xufSgpKSB8fCBfY2xhc3MyKTtcblxuZXhwb3J0IHZhciBMZXRFeHByZXNzaW9uID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBMZXRFeHByZXNzaW9uKG9ic2VydmVyTG9jYXRvciwgdGFyZ2V0UHJvcGVydHksIHNvdXJjZUV4cHJlc3Npb24sIGxvb2t1cEZ1bmN0aW9ucywgdG9CaW5kaW5nQ29udGV4dCkge1xuICAgIFxuXG4gICAgdGhpcy5vYnNlcnZlckxvY2F0b3IgPSBvYnNlcnZlckxvY2F0b3I7XG4gICAgdGhpcy5zb3VyY2VFeHByZXNzaW9uID0gc291cmNlRXhwcmVzc2lvbjtcbiAgICB0aGlzLnRhcmdldFByb3BlcnR5ID0gdGFyZ2V0UHJvcGVydHk7XG4gICAgdGhpcy5sb29rdXBGdW5jdGlvbnMgPSBsb29rdXBGdW5jdGlvbnM7XG4gICAgdGhpcy50b0JpbmRpbmdDb250ZXh0ID0gdG9CaW5kaW5nQ29udGV4dDtcbiAgfVxuXG4gIExldEV4cHJlc3Npb24ucHJvdG90eXBlLmNyZWF0ZUJpbmRpbmcgPSBmdW5jdGlvbiBjcmVhdGVCaW5kaW5nKCkge1xuICAgIHJldHVybiBuZXcgTGV0QmluZGluZyh0aGlzLm9ic2VydmVyTG9jYXRvciwgdGhpcy5zb3VyY2VFeHByZXNzaW9uLCB0aGlzLnRhcmdldFByb3BlcnR5LCB0aGlzLmxvb2t1cEZ1bmN0aW9ucywgdGhpcy50b0JpbmRpbmdDb250ZXh0KTtcbiAgfTtcblxuICByZXR1cm4gTGV0RXhwcmVzc2lvbjtcbn0oKTtcblxuZXhwb3J0IHZhciBMZXRCaW5kaW5nID0gKF9kZWMyID0gY29ubmVjdGFibGUoKSwgX2RlYzIoX2NsYXNzMyA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gTGV0QmluZGluZyhvYnNlcnZlckxvY2F0b3IsIHNvdXJjZUV4cHJlc3Npb24sIHRhcmdldFByb3BlcnR5LCBsb29rdXBGdW5jdGlvbnMsIHRvQmluZGluZ0NvbnRleHQpIHtcbiAgICBcblxuICAgIHRoaXMub2JzZXJ2ZXJMb2NhdG9yID0gb2JzZXJ2ZXJMb2NhdG9yO1xuICAgIHRoaXMuc291cmNlRXhwcmVzc2lvbiA9IHNvdXJjZUV4cHJlc3Npb247XG4gICAgdGhpcy50YXJnZXRQcm9wZXJ0eSA9IHRhcmdldFByb3BlcnR5O1xuICAgIHRoaXMubG9va3VwRnVuY3Rpb25zID0gbG9va3VwRnVuY3Rpb25zO1xuICAgIHRoaXMuc291cmNlID0gbnVsbDtcbiAgICB0aGlzLnRhcmdldCA9IG51bGw7XG4gICAgdGhpcy50b0JpbmRpbmdDb250ZXh0ID0gdG9CaW5kaW5nQ29udGV4dDtcbiAgfVxuXG4gIExldEJpbmRpbmcucHJvdG90eXBlLnVwZGF0ZVRhcmdldCA9IGZ1bmN0aW9uIHVwZGF0ZVRhcmdldCgpIHtcbiAgICB2YXIgdmFsdWUgPSB0aGlzLnNvdXJjZUV4cHJlc3Npb24uZXZhbHVhdGUodGhpcy5zb3VyY2UsIHRoaXMubG9va3VwRnVuY3Rpb25zKTtcbiAgICB0aGlzLnRhcmdldFt0aGlzLnRhcmdldFByb3BlcnR5XSA9IHZhbHVlO1xuICB9O1xuXG4gIExldEJpbmRpbmcucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiBjYWxsKGNvbnRleHQpIHtcbiAgICBpZiAoIXRoaXMuaXNCb3VuZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY29udGV4dCA9PT0gc291cmNlQ29udGV4dCkge1xuICAgICAgdGhpcy51cGRhdGVUYXJnZXQoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIGNhbGwgY29udGV4dCAnICsgY29udGV4dCk7XG4gIH07XG5cbiAgTGV0QmluZGluZy5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uIGJpbmQoc291cmNlKSB7XG4gICAgaWYgKHRoaXMuaXNCb3VuZCkge1xuICAgICAgaWYgKHRoaXMuc291cmNlID09PSBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy51bmJpbmQoKTtcbiAgICB9XG5cbiAgICB0aGlzLmlzQm91bmQgPSB0cnVlO1xuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIHRoaXMudGFyZ2V0ID0gdGhpcy50b0JpbmRpbmdDb250ZXh0ID8gc291cmNlLmJpbmRpbmdDb250ZXh0IDogc291cmNlLm92ZXJyaWRlQ29udGV4dDtcblxuICAgIGlmICh0aGlzLnNvdXJjZUV4cHJlc3Npb24uYmluZCkge1xuICAgICAgdGhpcy5zb3VyY2VFeHByZXNzaW9uLmJpbmQodGhpcywgc291cmNlLCB0aGlzLmxvb2t1cEZ1bmN0aW9ucyk7XG4gICAgfVxuXG4gICAgZW5xdWV1ZUJpbmRpbmdDb25uZWN0KHRoaXMpO1xuICB9O1xuXG4gIExldEJpbmRpbmcucHJvdG90eXBlLnVuYmluZCA9IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICBpZiAoIXRoaXMuaXNCb3VuZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmlzQm91bmQgPSBmYWxzZTtcbiAgICBpZiAodGhpcy5zb3VyY2VFeHByZXNzaW9uLnVuYmluZCkge1xuICAgICAgdGhpcy5zb3VyY2VFeHByZXNzaW9uLnVuYmluZCh0aGlzLCB0aGlzLnNvdXJjZSk7XG4gICAgfVxuICAgIHRoaXMuc291cmNlID0gbnVsbDtcbiAgICB0aGlzLnRhcmdldCA9IG51bGw7XG4gICAgdGhpcy51bm9ic2VydmUodHJ1ZSk7XG4gIH07XG5cbiAgTGV0QmluZGluZy5wcm90b3R5cGUuY29ubmVjdCA9IGZ1bmN0aW9uIGNvbm5lY3QoKSB7XG4gICAgaWYgKCF0aGlzLmlzQm91bmQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy51cGRhdGVUYXJnZXQoKTtcbiAgICB0aGlzLnNvdXJjZUV4cHJlc3Npb24uY29ubmVjdCh0aGlzLCB0aGlzLnNvdXJjZSk7XG4gIH07XG5cbiAgcmV0dXJuIExldEJpbmRpbmc7XG59KCkpIHx8IF9jbGFzczMpO1xuXG5leHBvcnQgdmFyIExldEludGVycG9sYXRpb25CaW5kaW5nRXhwcmVzc2lvbiA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gTGV0SW50ZXJwb2xhdGlvbkJpbmRpbmdFeHByZXNzaW9uKG9ic2VydmVyTG9jYXRvciwgdGFyZ2V0UHJvcGVydHksIHBhcnRzLCBsb29rdXBGdW5jdGlvbnMsIHRvQmluZGluZ0NvbnRleHQpIHtcbiAgICBcblxuICAgIHRoaXMub2JzZXJ2ZXJMb2NhdG9yID0gb2JzZXJ2ZXJMb2NhdG9yO1xuICAgIHRoaXMudGFyZ2V0UHJvcGVydHkgPSB0YXJnZXRQcm9wZXJ0eTtcbiAgICB0aGlzLnBhcnRzID0gcGFydHM7XG4gICAgdGhpcy5sb29rdXBGdW5jdGlvbnMgPSBsb29rdXBGdW5jdGlvbnM7XG4gICAgdGhpcy50b0JpbmRpbmdDb250ZXh0ID0gdG9CaW5kaW5nQ29udGV4dDtcbiAgfVxuXG4gIExldEludGVycG9sYXRpb25CaW5kaW5nRXhwcmVzc2lvbi5wcm90b3R5cGUuY3JlYXRlQmluZGluZyA9IGZ1bmN0aW9uIGNyZWF0ZUJpbmRpbmcoKSB7XG4gICAgcmV0dXJuIG5ldyBMZXRJbnRlcnBvbGF0aW9uQmluZGluZyh0aGlzLm9ic2VydmVyTG9jYXRvciwgdGhpcy50YXJnZXRQcm9wZXJ0eSwgdGhpcy5wYXJ0cywgdGhpcy5sb29rdXBGdW5jdGlvbnMsIHRoaXMudG9CaW5kaW5nQ29udGV4dCk7XG4gIH07XG5cbiAgcmV0dXJuIExldEludGVycG9sYXRpb25CaW5kaW5nRXhwcmVzc2lvbjtcbn0oKTtcblxuZXhwb3J0IHZhciBMZXRJbnRlcnBvbGF0aW9uQmluZGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gTGV0SW50ZXJwb2xhdGlvbkJpbmRpbmcob2JzZXJ2ZXJMb2NhdG9yLCB0YXJnZXRQcm9wZXJ0eSwgcGFydHMsIGxvb2t1cEZ1bmN0aW9ucywgdG9CaW5kaW5nQ29udGV4dCkge1xuICAgIFxuXG4gICAgdGhpcy5vYnNlcnZlckxvY2F0b3IgPSBvYnNlcnZlckxvY2F0b3I7XG4gICAgdGhpcy5wYXJ0cyA9IHBhcnRzO1xuICAgIHRoaXMudGFyZ2V0UHJvcGVydHkgPSB0YXJnZXRQcm9wZXJ0eTtcbiAgICB0aGlzLmxvb2t1cEZ1bmN0aW9ucyA9IGxvb2t1cEZ1bmN0aW9ucztcbiAgICB0aGlzLnRvQmluZGluZ0NvbnRleHQgPSB0b0JpbmRpbmdDb250ZXh0O1xuICAgIHRoaXMudGFyZ2V0ID0gbnVsbDtcbiAgfVxuXG4gIExldEludGVycG9sYXRpb25CaW5kaW5nLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gYmluZChzb3VyY2UpIHtcbiAgICBpZiAodGhpcy5pc0JvdW5kKSB7XG4gICAgICBpZiAodGhpcy5zb3VyY2UgPT09IHNvdXJjZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLnVuYmluZCgpO1xuICAgIH1cblxuICAgIHRoaXMuaXNCb3VuZCA9IHRydWU7XG4gICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgdGhpcy50YXJnZXQgPSB0aGlzLnRvQmluZGluZ0NvbnRleHQgPyBzb3VyY2UuYmluZGluZ0NvbnRleHQgOiBzb3VyY2Uub3ZlcnJpZGVDb250ZXh0O1xuXG4gICAgdGhpcy5pbnRlcnBvbGF0aW9uQmluZGluZyA9IHRoaXMuY3JlYXRlSW50ZXJwb2xhdGlvbkJpbmRpbmcoKTtcbiAgICB0aGlzLmludGVycG9sYXRpb25CaW5kaW5nLmJpbmQoc291cmNlKTtcbiAgfTtcblxuICBMZXRJbnRlcnBvbGF0aW9uQmluZGluZy5wcm90b3R5cGUudW5iaW5kID0gZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIGlmICghdGhpcy5pc0JvdW5kKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgIHRoaXMuc291cmNlID0gbnVsbDtcbiAgICB0aGlzLnRhcmdldCA9IG51bGw7XG4gICAgdGhpcy5pbnRlcnBvbGF0aW9uQmluZGluZy51bmJpbmQoKTtcbiAgICB0aGlzLmludGVycG9sYXRpb25CaW5kaW5nID0gbnVsbDtcbiAgfTtcblxuICBMZXRJbnRlcnBvbGF0aW9uQmluZGluZy5wcm90b3R5cGUuY3JlYXRlSW50ZXJwb2xhdGlvbkJpbmRpbmcgPSBmdW5jdGlvbiBjcmVhdGVJbnRlcnBvbGF0aW9uQmluZGluZygpIHtcbiAgICBpZiAodGhpcy5wYXJ0cy5sZW5ndGggPT09IDMpIHtcbiAgICAgIHJldHVybiBuZXcgQ2hpbGRJbnRlcnBvbGF0aW9uQmluZGluZyh0aGlzLnRhcmdldCwgdGhpcy5vYnNlcnZlckxvY2F0b3IsIHRoaXMucGFydHNbMV0sIGJpbmRpbmdNb2RlLm9uZVdheSwgdGhpcy5sb29rdXBGdW5jdGlvbnMsIHRoaXMudGFyZ2V0UHJvcGVydHksIHRoaXMucGFydHNbMF0sIHRoaXMucGFydHNbMl0pO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEludGVycG9sYXRpb25CaW5kaW5nKHRoaXMub2JzZXJ2ZXJMb2NhdG9yLCB0aGlzLnBhcnRzLCB0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRQcm9wZXJ0eSwgYmluZGluZ01vZGUub25lV2F5LCB0aGlzLmxvb2t1cEZ1bmN0aW9ucyk7XG4gIH07XG5cbiAgcmV0dXJuIExldEludGVycG9sYXRpb25CaW5kaW5nO1xufSgpO1xuXG5leHBvcnQgdmFyIFN5bnRheEludGVycHJldGVyID0gKF90ZW1wMiA9IF9jbGFzczQgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFN5bnRheEludGVycHJldGVyKHBhcnNlciwgb2JzZXJ2ZXJMb2NhdG9yLCBldmVudE1hbmFnZXIsIGF0dHJpYnV0ZU1hcCkge1xuICAgIFxuXG4gICAgdGhpcy5wYXJzZXIgPSBwYXJzZXI7XG4gICAgdGhpcy5vYnNlcnZlckxvY2F0b3IgPSBvYnNlcnZlckxvY2F0b3I7XG4gICAgdGhpcy5ldmVudE1hbmFnZXIgPSBldmVudE1hbmFnZXI7XG4gICAgdGhpcy5hdHRyaWJ1dGVNYXAgPSBhdHRyaWJ1dGVNYXA7XG4gIH1cblxuICBTeW50YXhJbnRlcnByZXRlci5wcm90b3R5cGUuaW50ZXJwcmV0ID0gZnVuY3Rpb24gaW50ZXJwcmV0KHJlc291cmNlcywgZWxlbWVudCwgaW5mbywgZXhpc3RpbmdJbnN0cnVjdGlvbiwgY29udGV4dCkge1xuICAgIGlmIChpbmZvLmNvbW1hbmQgaW4gdGhpcykge1xuICAgICAgcmV0dXJuIHRoaXNbaW5mby5jb21tYW5kXShyZXNvdXJjZXMsIGVsZW1lbnQsIGluZm8sIGV4aXN0aW5nSW5zdHJ1Y3Rpb24sIGNvbnRleHQpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmhhbmRsZVVua25vd25Db21tYW5kKHJlc291cmNlcywgZWxlbWVudCwgaW5mbywgZXhpc3RpbmdJbnN0cnVjdGlvbiwgY29udGV4dCk7XG4gIH07XG5cbiAgU3ludGF4SW50ZXJwcmV0ZXIucHJvdG90eXBlLmhhbmRsZVVua25vd25Db21tYW5kID0gZnVuY3Rpb24gaGFuZGxlVW5rbm93bkNvbW1hbmQocmVzb3VyY2VzLCBlbGVtZW50LCBpbmZvLCBleGlzdGluZ0luc3RydWN0aW9uLCBjb250ZXh0KSB7XG4gICAgTG9nTWFuYWdlci5nZXRMb2dnZXIoJ3RlbXBsYXRpbmctYmluZGluZycpLndhcm4oJ1Vua25vd24gYmluZGluZyBjb21tYW5kLicsIGluZm8pO1xuICAgIHJldHVybiBleGlzdGluZ0luc3RydWN0aW9uO1xuICB9O1xuXG4gIFN5bnRheEludGVycHJldGVyLnByb3RvdHlwZS5kZXRlcm1pbmVEZWZhdWx0QmluZGluZ01vZGUgPSBmdW5jdGlvbiBkZXRlcm1pbmVEZWZhdWx0QmluZGluZ01vZGUoZWxlbWVudCwgYXR0ck5hbWUsIGNvbnRleHQpIHtcbiAgICB2YXIgdGFnTmFtZSA9IGVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgaWYgKHRhZ05hbWUgPT09ICdpbnB1dCcgJiYgKGF0dHJOYW1lID09PSAndmFsdWUnIHx8IGF0dHJOYW1lID09PSAnZmlsZXMnKSAmJiBlbGVtZW50LnR5cGUgIT09ICdjaGVja2JveCcgJiYgZWxlbWVudC50eXBlICE9PSAncmFkaW8nIHx8IHRhZ05hbWUgPT09ICdpbnB1dCcgJiYgYXR0ck5hbWUgPT09ICdjaGVja2VkJyAmJiAoZWxlbWVudC50eXBlID09PSAnY2hlY2tib3gnIHx8IGVsZW1lbnQudHlwZSA9PT0gJ3JhZGlvJykgfHwgKHRhZ05hbWUgPT09ICd0ZXh0YXJlYScgfHwgdGFnTmFtZSA9PT0gJ3NlbGVjdCcpICYmIGF0dHJOYW1lID09PSAndmFsdWUnIHx8IChhdHRyTmFtZSA9PT0gJ3RleHRjb250ZW50JyB8fCBhdHRyTmFtZSA9PT0gJ2lubmVyaHRtbCcpICYmIGVsZW1lbnQuY29udGVudEVkaXRhYmxlID09PSAndHJ1ZScgfHwgYXR0ck5hbWUgPT09ICdzY3JvbGx0b3AnIHx8IGF0dHJOYW1lID09PSAnc2Nyb2xsbGVmdCcpIHtcbiAgICAgIHJldHVybiBiaW5kaW5nTW9kZS50d29XYXk7XG4gICAgfVxuXG4gICAgaWYgKGNvbnRleHQgJiYgYXR0ck5hbWUgaW4gY29udGV4dC5hdHRyaWJ1dGVzICYmIGNvbnRleHQuYXR0cmlidXRlc1thdHRyTmFtZV0gJiYgY29udGV4dC5hdHRyaWJ1dGVzW2F0dHJOYW1lXS5kZWZhdWx0QmluZGluZ01vZGUgPj0gYmluZGluZ01vZGUub25lVGltZSkge1xuICAgICAgcmV0dXJuIGNvbnRleHQuYXR0cmlidXRlc1thdHRyTmFtZV0uZGVmYXVsdEJpbmRpbmdNb2RlO1xuICAgIH1cblxuICAgIHJldHVybiBiaW5kaW5nTW9kZS5vbmVXYXk7XG4gIH07XG5cbiAgU3ludGF4SW50ZXJwcmV0ZXIucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiBiaW5kKHJlc291cmNlcywgZWxlbWVudCwgaW5mbywgZXhpc3RpbmdJbnN0cnVjdGlvbiwgY29udGV4dCkge1xuICAgIHZhciBpbnN0cnVjdGlvbiA9IGV4aXN0aW5nSW5zdHJ1Y3Rpb24gfHwgQmVoYXZpb3JJbnN0cnVjdGlvbi5hdHRyaWJ1dGUoaW5mby5hdHRyTmFtZSk7XG5cbiAgICBpbnN0cnVjdGlvbi5hdHRyaWJ1dGVzW2luZm8uYXR0ck5hbWVdID0gbmV3IEJpbmRpbmdFeHByZXNzaW9uKHRoaXMub2JzZXJ2ZXJMb2NhdG9yLCB0aGlzLmF0dHJpYnV0ZU1hcC5tYXAoZWxlbWVudC50YWdOYW1lLCBpbmZvLmF0dHJOYW1lKSwgdGhpcy5wYXJzZXIucGFyc2UoaW5mby5hdHRyVmFsdWUpLCBpbmZvLmRlZmF1bHRCaW5kaW5nTW9kZSA9PT0gdW5kZWZpbmVkIHx8IGluZm8uZGVmYXVsdEJpbmRpbmdNb2RlID09PSBudWxsID8gdGhpcy5kZXRlcm1pbmVEZWZhdWx0QmluZGluZ01vZGUoZWxlbWVudCwgaW5mby5hdHRyTmFtZSwgY29udGV4dCkgOiBpbmZvLmRlZmF1bHRCaW5kaW5nTW9kZSwgcmVzb3VyY2VzLmxvb2t1cEZ1bmN0aW9ucyk7XG5cbiAgICByZXR1cm4gaW5zdHJ1Y3Rpb247XG4gIH07XG5cbiAgU3ludGF4SW50ZXJwcmV0ZXIucHJvdG90eXBlLnRyaWdnZXIgPSBmdW5jdGlvbiB0cmlnZ2VyKHJlc291cmNlcywgZWxlbWVudCwgaW5mbykge1xuICAgIHJldHVybiBuZXcgTGlzdGVuZXJFeHByZXNzaW9uKHRoaXMuZXZlbnRNYW5hZ2VyLCBpbmZvLmF0dHJOYW1lLCB0aGlzLnBhcnNlci5wYXJzZShpbmZvLmF0dHJWYWx1ZSksIGRlbGVnYXRpb25TdHJhdGVneS5ub25lLCB0cnVlLCByZXNvdXJjZXMubG9va3VwRnVuY3Rpb25zKTtcbiAgfTtcblxuICBTeW50YXhJbnRlcnByZXRlci5wcm90b3R5cGUuY2FwdHVyZSA9IGZ1bmN0aW9uIGNhcHR1cmUocmVzb3VyY2VzLCBlbGVtZW50LCBpbmZvKSB7XG4gICAgcmV0dXJuIG5ldyBMaXN0ZW5lckV4cHJlc3Npb24odGhpcy5ldmVudE1hbmFnZXIsIGluZm8uYXR0ck5hbWUsIHRoaXMucGFyc2VyLnBhcnNlKGluZm8uYXR0clZhbHVlKSwgZGVsZWdhdGlvblN0cmF0ZWd5LmNhcHR1cmluZywgdHJ1ZSwgcmVzb3VyY2VzLmxvb2t1cEZ1bmN0aW9ucyk7XG4gIH07XG5cbiAgU3ludGF4SW50ZXJwcmV0ZXIucHJvdG90eXBlLmRlbGVnYXRlID0gZnVuY3Rpb24gZGVsZWdhdGUocmVzb3VyY2VzLCBlbGVtZW50LCBpbmZvKSB7XG4gICAgcmV0dXJuIG5ldyBMaXN0ZW5lckV4cHJlc3Npb24odGhpcy5ldmVudE1hbmFnZXIsIGluZm8uYXR0ck5hbWUsIHRoaXMucGFyc2VyLnBhcnNlKGluZm8uYXR0clZhbHVlKSwgZGVsZWdhdGlvblN0cmF0ZWd5LmJ1YmJsaW5nLCB0cnVlLCByZXNvdXJjZXMubG9va3VwRnVuY3Rpb25zKTtcbiAgfTtcblxuICBTeW50YXhJbnRlcnByZXRlci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIGNhbGwocmVzb3VyY2VzLCBlbGVtZW50LCBpbmZvLCBleGlzdGluZ0luc3RydWN0aW9uKSB7XG4gICAgdmFyIGluc3RydWN0aW9uID0gZXhpc3RpbmdJbnN0cnVjdGlvbiB8fCBCZWhhdmlvckluc3RydWN0aW9uLmF0dHJpYnV0ZShpbmZvLmF0dHJOYW1lKTtcblxuICAgIGluc3RydWN0aW9uLmF0dHJpYnV0ZXNbaW5mby5hdHRyTmFtZV0gPSBuZXcgQ2FsbEV4cHJlc3Npb24odGhpcy5vYnNlcnZlckxvY2F0b3IsIGluZm8uYXR0ck5hbWUsIHRoaXMucGFyc2VyLnBhcnNlKGluZm8uYXR0clZhbHVlKSwgcmVzb3VyY2VzLmxvb2t1cEZ1bmN0aW9ucyk7XG5cbiAgICByZXR1cm4gaW5zdHJ1Y3Rpb247XG4gIH07XG5cbiAgU3ludGF4SW50ZXJwcmV0ZXIucHJvdG90eXBlLm9wdGlvbnMgPSBmdW5jdGlvbiBvcHRpb25zKHJlc291cmNlcywgZWxlbWVudCwgaW5mbywgZXhpc3RpbmdJbnN0cnVjdGlvbiwgY29udGV4dCkge1xuICAgIHZhciBpbnN0cnVjdGlvbiA9IGV4aXN0aW5nSW5zdHJ1Y3Rpb24gfHwgQmVoYXZpb3JJbnN0cnVjdGlvbi5hdHRyaWJ1dGUoaW5mby5hdHRyTmFtZSk7XG4gICAgdmFyIGF0dHJWYWx1ZSA9IGluZm8uYXR0clZhbHVlO1xuICAgIHZhciBsYW5ndWFnZSA9IHRoaXMubGFuZ3VhZ2U7XG4gICAgdmFyIG5hbWUgPSBudWxsO1xuICAgIHZhciB0YXJnZXQgPSAnJztcbiAgICB2YXIgY3VycmVudCA9IHZvaWQgMDtcbiAgICB2YXIgaSA9IHZvaWQgMDtcbiAgICB2YXIgaWkgPSB2b2lkIDA7XG4gICAgdmFyIGluU3RyaW5nID0gZmFsc2U7XG4gICAgdmFyIGluRXNjYXBlID0gZmFsc2U7XG4gICAgdmFyIGZvdW5kTmFtZSA9IGZhbHNlO1xuXG4gICAgZm9yIChpID0gMCwgaWkgPSBhdHRyVmFsdWUubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgY3VycmVudCA9IGF0dHJWYWx1ZVtpXTtcblxuICAgICAgaWYgKGN1cnJlbnQgPT09ICc7JyAmJiAhaW5TdHJpbmcpIHtcbiAgICAgICAgaWYgKCFmb3VuZE5hbWUpIHtcbiAgICAgICAgICBuYW1lID0gdGhpcy5fZ2V0UHJpbWFyeVByb3BlcnR5TmFtZShyZXNvdXJjZXMsIGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIGluZm8gPSBsYW5ndWFnZS5pbnNwZWN0QXR0cmlidXRlKHJlc291cmNlcywgJz8nLCBuYW1lLCB0YXJnZXQudHJpbSgpKTtcbiAgICAgICAgbGFuZ3VhZ2UuY3JlYXRlQXR0cmlidXRlSW5zdHJ1Y3Rpb24ocmVzb3VyY2VzLCBlbGVtZW50LCBpbmZvLCBpbnN0cnVjdGlvbiwgY29udGV4dCk7XG5cbiAgICAgICAgaWYgKCFpbnN0cnVjdGlvbi5hdHRyaWJ1dGVzW2luZm8uYXR0ck5hbWVdKSB7XG4gICAgICAgICAgaW5zdHJ1Y3Rpb24uYXR0cmlidXRlc1tpbmZvLmF0dHJOYW1lXSA9IGluZm8uYXR0clZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGFyZ2V0ID0gJyc7XG4gICAgICAgIG5hbWUgPSBudWxsO1xuICAgICAgfSBlbHNlIGlmIChjdXJyZW50ID09PSAnOicgJiYgbmFtZSA9PT0gbnVsbCkge1xuICAgICAgICBmb3VuZE5hbWUgPSB0cnVlO1xuICAgICAgICBuYW1lID0gdGFyZ2V0LnRyaW0oKTtcbiAgICAgICAgdGFyZ2V0ID0gJyc7XG4gICAgICB9IGVsc2UgaWYgKGN1cnJlbnQgPT09ICdcXFxcJykge1xuICAgICAgICB0YXJnZXQgKz0gY3VycmVudDtcbiAgICAgICAgaW5Fc2NhcGUgPSB0cnVlO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldCArPSBjdXJyZW50O1xuXG4gICAgICAgIGlmIChuYW1lICE9PSBudWxsICYmIGluRXNjYXBlID09PSBmYWxzZSAmJiBjdXJyZW50ID09PSAnXFwnJykge1xuICAgICAgICAgIGluU3RyaW5nID0gIWluU3RyaW5nO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGluRXNjYXBlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCFmb3VuZE5hbWUpIHtcbiAgICAgIG5hbWUgPSB0aGlzLl9nZXRQcmltYXJ5UHJvcGVydHlOYW1lKHJlc291cmNlcywgY29udGV4dCk7XG4gICAgfVxuXG4gICAgaWYgKG5hbWUgIT09IG51bGwpIHtcbiAgICAgIGluZm8gPSBsYW5ndWFnZS5pbnNwZWN0QXR0cmlidXRlKHJlc291cmNlcywgJz8nLCBuYW1lLCB0YXJnZXQudHJpbSgpKTtcbiAgICAgIGxhbmd1YWdlLmNyZWF0ZUF0dHJpYnV0ZUluc3RydWN0aW9uKHJlc291cmNlcywgZWxlbWVudCwgaW5mbywgaW5zdHJ1Y3Rpb24sIGNvbnRleHQpO1xuXG4gICAgICBpZiAoIWluc3RydWN0aW9uLmF0dHJpYnV0ZXNbaW5mby5hdHRyTmFtZV0pIHtcbiAgICAgICAgaW5zdHJ1Y3Rpb24uYXR0cmlidXRlc1tpbmZvLmF0dHJOYW1lXSA9IGluZm8uYXR0clZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBpbnN0cnVjdGlvbjtcbiAgfTtcblxuICBTeW50YXhJbnRlcnByZXRlci5wcm90b3R5cGUuX2dldFByaW1hcnlQcm9wZXJ0eU5hbWUgPSBmdW5jdGlvbiBfZ2V0UHJpbWFyeVByb3BlcnR5TmFtZShyZXNvdXJjZXMsIGNvbnRleHQpIHtcbiAgICB2YXIgdHlwZSA9IHJlc291cmNlcy5nZXRBdHRyaWJ1dGUoY29udGV4dC5hdHRyaWJ1dGVOYW1lKTtcbiAgICBpZiAodHlwZSAmJiB0eXBlLnByaW1hcnlQcm9wZXJ0eSkge1xuICAgICAgcmV0dXJuIHR5cGUucHJpbWFyeVByb3BlcnR5LmF0dHJpYnV0ZTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgU3ludGF4SW50ZXJwcmV0ZXIucHJvdG90eXBlWydmb3InXSA9IGZ1bmN0aW9uIF9mb3IocmVzb3VyY2VzLCBlbGVtZW50LCBpbmZvLCBleGlzdGluZ0luc3RydWN0aW9uKSB7XG4gICAgdmFyIHBhcnRzID0gdm9pZCAwO1xuICAgIHZhciBrZXlWYWx1ZSA9IHZvaWQgMDtcbiAgICB2YXIgaW5zdHJ1Y3Rpb24gPSB2b2lkIDA7XG4gICAgdmFyIGF0dHJWYWx1ZSA9IHZvaWQgMDtcbiAgICB2YXIgaXNEZXN0cnVjdHVyaW5nID0gdm9pZCAwO1xuXG4gICAgYXR0clZhbHVlID0gaW5mby5hdHRyVmFsdWU7XG4gICAgaXNEZXN0cnVjdHVyaW5nID0gYXR0clZhbHVlLm1hdGNoKC9eICpbW10uK1tcXF1dLyk7XG4gICAgcGFydHMgPSBpc0Rlc3RydWN0dXJpbmcgPyBhdHRyVmFsdWUuc3BsaXQoJ29mICcpIDogYXR0clZhbHVlLnNwbGl0KCcgb2YgJyk7XG5cbiAgICBpZiAocGFydHMubGVuZ3RoICE9PSAyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0luY29ycmVjdCBzeW50YXggZm9yIFwiZm9yXCIuIFRoZSBmb3JtIGlzOiBcIiRsb2NhbCBvZiAkaXRlbXNcIiBvciBcIlska2V5LCAkdmFsdWVdIG9mICRpdGVtc1wiLicpO1xuICAgIH1cblxuICAgIGluc3RydWN0aW9uID0gZXhpc3RpbmdJbnN0cnVjdGlvbiB8fCBCZWhhdmlvckluc3RydWN0aW9uLmF0dHJpYnV0ZShpbmZvLmF0dHJOYW1lKTtcblxuICAgIGlmIChpc0Rlc3RydWN0dXJpbmcpIHtcbiAgICAgIGtleVZhbHVlID0gcGFydHNbMF0ucmVwbGFjZSgvW1tcXF1dL2csICcnKS5yZXBsYWNlKC8sL2csICcgJykucmVwbGFjZSgvXFxzKy9nLCAnICcpLnRyaW0oKS5zcGxpdCgnICcpO1xuICAgICAgaW5zdHJ1Y3Rpb24uYXR0cmlidXRlcy5rZXkgPSBrZXlWYWx1ZVswXTtcbiAgICAgIGluc3RydWN0aW9uLmF0dHJpYnV0ZXMudmFsdWUgPSBrZXlWYWx1ZVsxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5zdHJ1Y3Rpb24uYXR0cmlidXRlcy5sb2NhbCA9IHBhcnRzWzBdO1xuICAgIH1cblxuICAgIGluc3RydWN0aW9uLmF0dHJpYnV0ZXMuaXRlbXMgPSBuZXcgQmluZGluZ0V4cHJlc3Npb24odGhpcy5vYnNlcnZlckxvY2F0b3IsICdpdGVtcycsIHRoaXMucGFyc2VyLnBhcnNlKHBhcnRzWzFdKSwgYmluZGluZ01vZGUub25lV2F5LCByZXNvdXJjZXMubG9va3VwRnVuY3Rpb25zKTtcblxuICAgIHJldHVybiBpbnN0cnVjdGlvbjtcbiAgfTtcblxuICBTeW50YXhJbnRlcnByZXRlci5wcm90b3R5cGVbJ3R3by13YXknXSA9IGZ1bmN0aW9uIHR3b1dheShyZXNvdXJjZXMsIGVsZW1lbnQsIGluZm8sIGV4aXN0aW5nSW5zdHJ1Y3Rpb24pIHtcbiAgICB2YXIgaW5zdHJ1Y3Rpb24gPSBleGlzdGluZ0luc3RydWN0aW9uIHx8IEJlaGF2aW9ySW5zdHJ1Y3Rpb24uYXR0cmlidXRlKGluZm8uYXR0ck5hbWUpO1xuXG4gICAgaW5zdHJ1Y3Rpb24uYXR0cmlidXRlc1tpbmZvLmF0dHJOYW1lXSA9IG5ldyBCaW5kaW5nRXhwcmVzc2lvbih0aGlzLm9ic2VydmVyTG9jYXRvciwgdGhpcy5hdHRyaWJ1dGVNYXAubWFwKGVsZW1lbnQudGFnTmFtZSwgaW5mby5hdHRyTmFtZSksIHRoaXMucGFyc2VyLnBhcnNlKGluZm8uYXR0clZhbHVlKSwgYmluZGluZ01vZGUudHdvV2F5LCByZXNvdXJjZXMubG9va3VwRnVuY3Rpb25zKTtcblxuICAgIHJldHVybiBpbnN0cnVjdGlvbjtcbiAgfTtcblxuICBTeW50YXhJbnRlcnByZXRlci5wcm90b3R5cGVbJ3RvLXZpZXcnXSA9IGZ1bmN0aW9uIHRvVmlldyhyZXNvdXJjZXMsIGVsZW1lbnQsIGluZm8sIGV4aXN0aW5nSW5zdHJ1Y3Rpb24pIHtcbiAgICB2YXIgaW5zdHJ1Y3Rpb24gPSBleGlzdGluZ0luc3RydWN0aW9uIHx8IEJlaGF2aW9ySW5zdHJ1Y3Rpb24uYXR0cmlidXRlKGluZm8uYXR0ck5hbWUpO1xuXG4gICAgaW5zdHJ1Y3Rpb24uYXR0cmlidXRlc1tpbmZvLmF0dHJOYW1lXSA9IG5ldyBCaW5kaW5nRXhwcmVzc2lvbih0aGlzLm9ic2VydmVyTG9jYXRvciwgdGhpcy5hdHRyaWJ1dGVNYXAubWFwKGVsZW1lbnQudGFnTmFtZSwgaW5mby5hdHRyTmFtZSksIHRoaXMucGFyc2VyLnBhcnNlKGluZm8uYXR0clZhbHVlKSwgYmluZGluZ01vZGUudG9WaWV3LCByZXNvdXJjZXMubG9va3VwRnVuY3Rpb25zKTtcblxuICAgIHJldHVybiBpbnN0cnVjdGlvbjtcbiAgfTtcblxuICBTeW50YXhJbnRlcnByZXRlci5wcm90b3R5cGVbJ2Zyb20tdmlldyddID0gZnVuY3Rpb24gZnJvbVZpZXcocmVzb3VyY2VzLCBlbGVtZW50LCBpbmZvLCBleGlzdGluZ0luc3RydWN0aW9uKSB7XG4gICAgdmFyIGluc3RydWN0aW9uID0gZXhpc3RpbmdJbnN0cnVjdGlvbiB8fCBCZWhhdmlvckluc3RydWN0aW9uLmF0dHJpYnV0ZShpbmZvLmF0dHJOYW1lKTtcblxuICAgIGluc3RydWN0aW9uLmF0dHJpYnV0ZXNbaW5mby5hdHRyTmFtZV0gPSBuZXcgQmluZGluZ0V4cHJlc3Npb24odGhpcy5vYnNlcnZlckxvY2F0b3IsIHRoaXMuYXR0cmlidXRlTWFwLm1hcChlbGVtZW50LnRhZ05hbWUsIGluZm8uYXR0ck5hbWUpLCB0aGlzLnBhcnNlci5wYXJzZShpbmZvLmF0dHJWYWx1ZSksIGJpbmRpbmdNb2RlLmZyb21WaWV3LCByZXNvdXJjZXMubG9va3VwRnVuY3Rpb25zKTtcblxuICAgIHJldHVybiBpbnN0cnVjdGlvbjtcbiAgfTtcblxuICBTeW50YXhJbnRlcnByZXRlci5wcm90b3R5cGVbJ29uZS10aW1lJ10gPSBmdW5jdGlvbiBvbmVUaW1lKHJlc291cmNlcywgZWxlbWVudCwgaW5mbywgZXhpc3RpbmdJbnN0cnVjdGlvbikge1xuICAgIHZhciBpbnN0cnVjdGlvbiA9IGV4aXN0aW5nSW5zdHJ1Y3Rpb24gfHwgQmVoYXZpb3JJbnN0cnVjdGlvbi5hdHRyaWJ1dGUoaW5mby5hdHRyTmFtZSk7XG5cbiAgICBpbnN0cnVjdGlvbi5hdHRyaWJ1dGVzW2luZm8uYXR0ck5hbWVdID0gbmV3IEJpbmRpbmdFeHByZXNzaW9uKHRoaXMub2JzZXJ2ZXJMb2NhdG9yLCB0aGlzLmF0dHJpYnV0ZU1hcC5tYXAoZWxlbWVudC50YWdOYW1lLCBpbmZvLmF0dHJOYW1lKSwgdGhpcy5wYXJzZXIucGFyc2UoaW5mby5hdHRyVmFsdWUpLCBiaW5kaW5nTW9kZS5vbmVUaW1lLCByZXNvdXJjZXMubG9va3VwRnVuY3Rpb25zKTtcblxuICAgIHJldHVybiBpbnN0cnVjdGlvbjtcbiAgfTtcblxuICByZXR1cm4gU3ludGF4SW50ZXJwcmV0ZXI7XG59KCksIF9jbGFzczQuaW5qZWN0ID0gW1BhcnNlciwgT2JzZXJ2ZXJMb2NhdG9yLCBFdmVudE1hbmFnZXIsIEF0dHJpYnV0ZU1hcF0sIF90ZW1wMik7XG5cblN5bnRheEludGVycHJldGVyLnByb3RvdHlwZVsnb25lLXdheSddID0gU3ludGF4SW50ZXJwcmV0ZXIucHJvdG90eXBlWyd0by12aWV3J107XG5cbnZhciBpbmZvID0ge307XG5cbmV4cG9ydCB2YXIgVGVtcGxhdGluZ0JpbmRpbmdMYW5ndWFnZSA9IChfdGVtcDMgPSBfY2xhc3M1ID0gZnVuY3Rpb24gKF9CaW5kaW5nTGFuZ3VhZ2UpIHtcbiAgX2luaGVyaXRzKFRlbXBsYXRpbmdCaW5kaW5nTGFuZ3VhZ2UsIF9CaW5kaW5nTGFuZ3VhZ2UpO1xuXG4gIGZ1bmN0aW9uIFRlbXBsYXRpbmdCaW5kaW5nTGFuZ3VhZ2UocGFyc2VyLCBvYnNlcnZlckxvY2F0b3IsIHN5bnRheEludGVycHJldGVyLCBhdHRyaWJ1dGVNYXApIHtcbiAgICBcblxuICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9CaW5kaW5nTGFuZ3VhZ2UuY2FsbCh0aGlzKSk7XG5cbiAgICBfdGhpcy5wYXJzZXIgPSBwYXJzZXI7XG4gICAgX3RoaXMub2JzZXJ2ZXJMb2NhdG9yID0gb2JzZXJ2ZXJMb2NhdG9yO1xuICAgIF90aGlzLnN5bnRheEludGVycHJldGVyID0gc3ludGF4SW50ZXJwcmV0ZXI7XG4gICAgX3RoaXMuZW1wdHlTdHJpbmdFeHByZXNzaW9uID0gX3RoaXMucGFyc2VyLnBhcnNlKCdcXCdcXCcnKTtcbiAgICBzeW50YXhJbnRlcnByZXRlci5sYW5ndWFnZSA9IF90aGlzO1xuICAgIF90aGlzLmF0dHJpYnV0ZU1hcCA9IGF0dHJpYnV0ZU1hcDtcbiAgICBfdGhpcy50b0JpbmRpbmdDb250ZXh0QXR0ciA9ICd0by1iaW5kaW5nLWNvbnRleHQnO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIFRlbXBsYXRpbmdCaW5kaW5nTGFuZ3VhZ2UucHJvdG90eXBlLmluc3BlY3RBdHRyaWJ1dGUgPSBmdW5jdGlvbiBpbnNwZWN0QXR0cmlidXRlKHJlc291cmNlcywgZWxlbWVudE5hbWUsIGF0dHJOYW1lLCBhdHRyVmFsdWUpIHtcbiAgICB2YXIgcGFydHMgPSBhdHRyTmFtZS5zcGxpdCgnLicpO1xuXG4gICAgaW5mby5kZWZhdWx0QmluZGluZ01vZGUgPSBudWxsO1xuXG4gICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgaW5mby5hdHRyTmFtZSA9IHBhcnRzWzBdLnRyaW0oKTtcbiAgICAgIGluZm8uYXR0clZhbHVlID0gYXR0clZhbHVlO1xuICAgICAgaW5mby5jb21tYW5kID0gcGFydHNbMV0udHJpbSgpO1xuXG4gICAgICBpZiAoaW5mby5jb21tYW5kID09PSAncmVmJykge1xuICAgICAgICBpbmZvLmV4cHJlc3Npb24gPSBuZXcgTmFtZUV4cHJlc3Npb24odGhpcy5wYXJzZXIucGFyc2UoYXR0clZhbHVlKSwgaW5mby5hdHRyTmFtZSwgcmVzb3VyY2VzLmxvb2t1cEZ1bmN0aW9ucyk7XG4gICAgICAgIGluZm8uY29tbWFuZCA9IG51bGw7XG4gICAgICAgIGluZm8uYXR0ck5hbWUgPSAncmVmJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGluZm8uZXhwcmVzc2lvbiA9IG51bGw7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChhdHRyTmFtZSA9PT0gJ3JlZicpIHtcbiAgICAgIGluZm8uYXR0ck5hbWUgPSBhdHRyTmFtZTtcbiAgICAgIGluZm8uYXR0clZhbHVlID0gYXR0clZhbHVlO1xuICAgICAgaW5mby5jb21tYW5kID0gbnVsbDtcbiAgICAgIGluZm8uZXhwcmVzc2lvbiA9IG5ldyBOYW1lRXhwcmVzc2lvbih0aGlzLnBhcnNlci5wYXJzZShhdHRyVmFsdWUpLCAnZWxlbWVudCcsIHJlc291cmNlcy5sb29rdXBGdW5jdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbmZvLmF0dHJOYW1lID0gYXR0ck5hbWU7XG4gICAgICBpbmZvLmF0dHJWYWx1ZSA9IGF0dHJWYWx1ZTtcbiAgICAgIGluZm8uY29tbWFuZCA9IG51bGw7XG4gICAgICB2YXIgaW50ZXJwb2xhdGlvblBhcnRzID0gdGhpcy5wYXJzZUludGVycG9sYXRpb24ocmVzb3VyY2VzLCBhdHRyVmFsdWUpO1xuICAgICAgaWYgKGludGVycG9sYXRpb25QYXJ0cyA9PT0gbnVsbCkge1xuICAgICAgICBpbmZvLmV4cHJlc3Npb24gPSBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5mby5leHByZXNzaW9uID0gbmV3IEludGVycG9sYXRpb25CaW5kaW5nRXhwcmVzc2lvbih0aGlzLm9ic2VydmVyTG9jYXRvciwgdGhpcy5hdHRyaWJ1dGVNYXAubWFwKGVsZW1lbnROYW1lLCBhdHRyTmFtZSksIGludGVycG9sYXRpb25QYXJ0cywgYmluZGluZ01vZGUub25lV2F5LCByZXNvdXJjZXMubG9va3VwRnVuY3Rpb25zLCBhdHRyTmFtZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGluZm87XG4gIH07XG5cbiAgVGVtcGxhdGluZ0JpbmRpbmdMYW5ndWFnZS5wcm90b3R5cGUuY3JlYXRlQXR0cmlidXRlSW5zdHJ1Y3Rpb24gPSBmdW5jdGlvbiBjcmVhdGVBdHRyaWJ1dGVJbnN0cnVjdGlvbihyZXNvdXJjZXMsIGVsZW1lbnQsIHRoZUluZm8sIGV4aXN0aW5nSW5zdHJ1Y3Rpb24sIGNvbnRleHQpIHtcbiAgICB2YXIgaW5zdHJ1Y3Rpb24gPSB2b2lkIDA7XG5cbiAgICBpZiAodGhlSW5mby5leHByZXNzaW9uKSB7XG4gICAgICBpZiAodGhlSW5mby5hdHRyTmFtZSA9PT0gJ3JlZicpIHtcbiAgICAgICAgcmV0dXJuIHRoZUluZm8uZXhwcmVzc2lvbjtcbiAgICAgIH1cblxuICAgICAgaW5zdHJ1Y3Rpb24gPSBleGlzdGluZ0luc3RydWN0aW9uIHx8IEJlaGF2aW9ySW5zdHJ1Y3Rpb24uYXR0cmlidXRlKHRoZUluZm8uYXR0ck5hbWUpO1xuICAgICAgaW5zdHJ1Y3Rpb24uYXR0cmlidXRlc1t0aGVJbmZvLmF0dHJOYW1lXSA9IHRoZUluZm8uZXhwcmVzc2lvbjtcbiAgICB9IGVsc2UgaWYgKHRoZUluZm8uY29tbWFuZCkge1xuICAgICAgaW5zdHJ1Y3Rpb24gPSB0aGlzLnN5bnRheEludGVycHJldGVyLmludGVycHJldChyZXNvdXJjZXMsIGVsZW1lbnQsIHRoZUluZm8sIGV4aXN0aW5nSW5zdHJ1Y3Rpb24sIGNvbnRleHQpO1xuICAgIH1cblxuICAgIHJldHVybiBpbnN0cnVjdGlvbjtcbiAgfTtcblxuICBUZW1wbGF0aW5nQmluZGluZ0xhbmd1YWdlLnByb3RvdHlwZS5jcmVhdGVMZXRFeHByZXNzaW9ucyA9IGZ1bmN0aW9uIGNyZWF0ZUxldEV4cHJlc3Npb25zKHJlc291cmNlcywgbGV0RWxlbWVudCkge1xuICAgIHZhciBleHByZXNzaW9ucyA9IFtdO1xuICAgIHZhciBhdHRyaWJ1dGVzID0gbGV0RWxlbWVudC5hdHRyaWJ1dGVzO1xuXG4gICAgdmFyIGF0dHIgPSB2b2lkIDA7XG5cbiAgICB2YXIgcGFydHMgPSB2b2lkIDA7XG4gICAgdmFyIGF0dHJOYW1lID0gdm9pZCAwO1xuICAgIHZhciBhdHRyVmFsdWUgPSB2b2lkIDA7XG4gICAgdmFyIGNvbW1hbmQgPSB2b2lkIDA7XG4gICAgdmFyIHRvQmluZGluZ0NvbnRleHRBdHRyID0gdGhpcy50b0JpbmRpbmdDb250ZXh0QXR0cjtcbiAgICB2YXIgdG9CaW5kaW5nQ29udGV4dCA9IGxldEVsZW1lbnQuaGFzQXR0cmlidXRlKHRvQmluZGluZ0NvbnRleHRBdHRyKTtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBhdHRyaWJ1dGVzLmxlbmd0aDsgaWkgPiBpOyArK2kpIHtcbiAgICAgIGF0dHIgPSBhdHRyaWJ1dGVzW2ldO1xuICAgICAgYXR0ck5hbWUgPSBhdHRyLm5hbWU7XG4gICAgICBhdHRyVmFsdWUgPSBhdHRyLm5vZGVWYWx1ZTtcbiAgICAgIHBhcnRzID0gYXR0ck5hbWUuc3BsaXQoJy4nKTtcblxuICAgICAgaWYgKGF0dHJOYW1lID09PSB0b0JpbmRpbmdDb250ZXh0QXR0cikge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICBjb21tYW5kID0gcGFydHNbMV07XG4gICAgICAgIGlmIChjb21tYW5kICE9PSAnYmluZCcpIHtcbiAgICAgICAgICBMb2dNYW5hZ2VyLmdldExvZ2dlcigndGVtcGxhdGluZy1iaW5kaW5nLWxhbmd1YWdlJykud2FybignRGV0ZWN0ZWQgaW52YWxpZCBsZXQgY29tbWFuZC4gRXhwZWN0ZWQgXCInICsgcGFydHNbMF0gKyAnLmJpbmRcIiwgZ2l2ZW4gXCInICsgYXR0ck5hbWUgKyAnXCInKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBleHByZXNzaW9ucy5wdXNoKG5ldyBMZXRFeHByZXNzaW9uKHRoaXMub2JzZXJ2ZXJMb2NhdG9yLCBjYW1lbENhc2UocGFydHNbMF0pLCB0aGlzLnBhcnNlci5wYXJzZShhdHRyVmFsdWUpLCByZXNvdXJjZXMubG9va3VwRnVuY3Rpb25zLCB0b0JpbmRpbmdDb250ZXh0KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhdHRyTmFtZSA9IGNhbWVsQ2FzZShhdHRyTmFtZSk7XG4gICAgICAgIHBhcnRzID0gdGhpcy5wYXJzZUludGVycG9sYXRpb24ocmVzb3VyY2VzLCBhdHRyVmFsdWUpO1xuICAgICAgICBpZiAocGFydHMgPT09IG51bGwpIHtcbiAgICAgICAgICBMb2dNYW5hZ2VyLmdldExvZ2dlcigndGVtcGxhdGluZy1iaW5kaW5nLWxhbmd1YWdlJykud2FybignRGV0ZWN0ZWQgc3RyaW5nIGxpdGVyYWwgaW4gbGV0IGJpbmRpbmdzLiBEaWQgeW91IG1lYW4gXCInICsgYXR0ck5hbWUgKyAnLmJpbmQ9JyArIGF0dHJWYWx1ZSArICdcIiBvciBcIicgKyBhdHRyTmFtZSArICc9JHsnICsgYXR0clZhbHVlICsgJ31cIiA/Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnRzKSB7XG4gICAgICAgICAgZXhwcmVzc2lvbnMucHVzaChuZXcgTGV0SW50ZXJwb2xhdGlvbkJpbmRpbmdFeHByZXNzaW9uKHRoaXMub2JzZXJ2ZXJMb2NhdG9yLCBhdHRyTmFtZSwgcGFydHMsIHJlc291cmNlcy5sb29rdXBGdW5jdGlvbnMsIHRvQmluZGluZ0NvbnRleHQpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBleHByZXNzaW9ucy5wdXNoKG5ldyBMZXRFeHByZXNzaW9uKHRoaXMub2JzZXJ2ZXJMb2NhdG9yLCBhdHRyTmFtZSwgbmV3IExpdGVyYWxTdHJpbmcoYXR0clZhbHVlKSwgcmVzb3VyY2VzLmxvb2t1cEZ1bmN0aW9ucywgdG9CaW5kaW5nQ29udGV4dCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBleHByZXNzaW9ucztcbiAgfTtcblxuICBUZW1wbGF0aW5nQmluZGluZ0xhbmd1YWdlLnByb3RvdHlwZS5pbnNwZWN0VGV4dENvbnRlbnQgPSBmdW5jdGlvbiBpbnNwZWN0VGV4dENvbnRlbnQocmVzb3VyY2VzLCB2YWx1ZSkge1xuICAgIHZhciBwYXJ0cyA9IHRoaXMucGFyc2VJbnRlcnBvbGF0aW9uKHJlc291cmNlcywgdmFsdWUpO1xuICAgIGlmIChwYXJ0cyA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBuZXcgSW50ZXJwb2xhdGlvbkJpbmRpbmdFeHByZXNzaW9uKHRoaXMub2JzZXJ2ZXJMb2NhdG9yLCAndGV4dENvbnRlbnQnLCBwYXJ0cywgYmluZGluZ01vZGUub25lV2F5LCByZXNvdXJjZXMubG9va3VwRnVuY3Rpb25zLCAndGV4dENvbnRlbnQnKTtcbiAgfTtcblxuICBUZW1wbGF0aW5nQmluZGluZ0xhbmd1YWdlLnByb3RvdHlwZS5wYXJzZUludGVycG9sYXRpb24gPSBmdW5jdGlvbiBwYXJzZUludGVycG9sYXRpb24ocmVzb3VyY2VzLCB2YWx1ZSkge1xuICAgIHZhciBpID0gdmFsdWUuaW5kZXhPZignJHsnLCAwKTtcbiAgICB2YXIgaWkgPSB2YWx1ZS5sZW5ndGg7XG4gICAgdmFyIGNoYXIgPSB2b2lkIDA7XG4gICAgdmFyIHBvcyA9IDA7XG4gICAgdmFyIG9wZW4gPSAwO1xuICAgIHZhciBxdW90ZSA9IG51bGw7XG4gICAgdmFyIGludGVycG9sYXRpb25TdGFydCA9IHZvaWQgMDtcbiAgICB2YXIgcGFydHMgPSB2b2lkIDA7XG4gICAgdmFyIHBhcnRJbmRleCA9IDA7XG5cbiAgICB3aGlsZSAoaSA+PSAwICYmIGkgPCBpaSAtIDIpIHtcbiAgICAgIG9wZW4gPSAxO1xuICAgICAgaW50ZXJwb2xhdGlvblN0YXJ0ID0gaTtcbiAgICAgIGkgKz0gMjtcblxuICAgICAgZG8ge1xuICAgICAgICBjaGFyID0gdmFsdWVbaV07XG4gICAgICAgIGkrKztcblxuICAgICAgICBpZiAoY2hhciA9PT0gXCInXCIgfHwgY2hhciA9PT0gJ1wiJykge1xuICAgICAgICAgIGlmIChxdW90ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcXVvdGUgPSBjaGFyO1xuICAgICAgICAgIH0gZWxzZSBpZiAocXVvdGUgPT09IGNoYXIpIHtcbiAgICAgICAgICAgIHF1b3RlID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2hhciA9PT0gJ1xcXFwnKSB7XG4gICAgICAgICAgaSsrO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHF1b3RlICE9PSBudWxsKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2hhciA9PT0gJ3snKSB7XG4gICAgICAgICAgb3BlbisrO1xuICAgICAgICB9IGVsc2UgaWYgKGNoYXIgPT09ICd9Jykge1xuICAgICAgICAgIG9wZW4tLTtcbiAgICAgICAgfVxuICAgICAgfSB3aGlsZSAob3BlbiA+IDAgJiYgaSA8IGlpKTtcblxuICAgICAgaWYgKG9wZW4gPT09IDApIHtcbiAgICAgICAgcGFydHMgPSBwYXJ0cyB8fCBbXTtcbiAgICAgICAgaWYgKHZhbHVlW2ludGVycG9sYXRpb25TdGFydCAtIDFdID09PSAnXFxcXCcgJiYgdmFsdWVbaW50ZXJwb2xhdGlvblN0YXJ0IC0gMl0gIT09ICdcXFxcJykge1xuICAgICAgICAgIHBhcnRzW3BhcnRJbmRleF0gPSB2YWx1ZS5zdWJzdHJpbmcocG9zLCBpbnRlcnBvbGF0aW9uU3RhcnQgLSAxKSArIHZhbHVlLnN1YnN0cmluZyhpbnRlcnBvbGF0aW9uU3RhcnQsIGkpO1xuICAgICAgICAgIHBhcnRJbmRleCsrO1xuICAgICAgICAgIHBhcnRzW3BhcnRJbmRleF0gPSB0aGlzLmVtcHR5U3RyaW5nRXhwcmVzc2lvbjtcbiAgICAgICAgICBwYXJ0SW5kZXgrKztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYXJ0c1twYXJ0SW5kZXhdID0gdmFsdWUuc3Vic3RyaW5nKHBvcywgaW50ZXJwb2xhdGlvblN0YXJ0KTtcbiAgICAgICAgICBwYXJ0SW5kZXgrKztcbiAgICAgICAgICBwYXJ0c1twYXJ0SW5kZXhdID0gdGhpcy5wYXJzZXIucGFyc2UodmFsdWUuc3Vic3RyaW5nKGludGVycG9sYXRpb25TdGFydCArIDIsIGkgLSAxKSk7XG4gICAgICAgICAgcGFydEluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgcG9zID0gaTtcbiAgICAgICAgaSA9IHZhbHVlLmluZGV4T2YoJyR7JywgaSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocGFydEluZGV4ID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBwYXJ0c1twYXJ0SW5kZXhdID0gdmFsdWUuc3Vic3RyKHBvcyk7XG4gICAgcmV0dXJuIHBhcnRzO1xuICB9O1xuXG4gIHJldHVybiBUZW1wbGF0aW5nQmluZGluZ0xhbmd1YWdlO1xufShCaW5kaW5nTGFuZ3VhZ2UpLCBfY2xhc3M1LmluamVjdCA9IFtQYXJzZXIsIE9ic2VydmVyTG9jYXRvciwgU3ludGF4SW50ZXJwcmV0ZXIsIEF0dHJpYnV0ZU1hcF0sIF90ZW1wMyk7XG5cbmV4cG9ydCBmdW5jdGlvbiBjb25maWd1cmUoY29uZmlnKSB7XG4gIGNvbmZpZy5jb250YWluZXIucmVnaXN0ZXJTaW5nbGV0b24oQmluZGluZ0xhbmd1YWdlLCBUZW1wbGF0aW5nQmluZGluZ0xhbmd1YWdlKTtcbiAgY29uZmlnLmNvbnRhaW5lci5yZWdpc3RlckFsaWFzKEJpbmRpbmdMYW5ndWFnZSwgVGVtcGxhdGluZ0JpbmRpbmdMYW5ndWFnZSk7XG59Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///aurelia-templating-binding\n");

/***/ })

}]);